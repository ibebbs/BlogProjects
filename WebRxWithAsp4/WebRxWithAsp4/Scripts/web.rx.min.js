!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?exports.wx=b():a.wx=b()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){"use strict";function d(a){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])}var e=c(1);b.app=e.app,b.router=e.router,b.messageBus=e.messageBus;var f=c(9);b.module=f.module,d(c(3));var g=c(8);b.property=g.property;var h=c(11);b.applyBindings=h.applyBindings,b.cleanNode=h.cleanNode;var i=c(25);b.command=i.command,b.asyncCommand=i.asyncCommand,b.isCommand=i.isCommand;var j=c(55);b.animation=j.animation;var k=c(13);b.getOid=k.getOid;var l=c(18);b.list=l.list;var m=c(17);b.isList=m.isList;var n=c(15);b.createMap=n.createMap;var o=c(14);b.createSet=o.createSet,b.setToArray=o.setToArray;var p=c(12);b.createWeakMap=p.createWeakMap;var q=c(19);b.Lazy=q["default"];var r=c(32);b.VirtualChildNodes=r["default"];var s=c(50);b.route=s.route;var t=c(34);b.getNodeValue=t.getNodeValue,b.setNodeValue=t.setNodeValue;var u=c(2);b.injector=u.injector;var v=c(5);b.IID=v["default"];var w=c(52);b.getHttpClientDefaultConfig=w.getHttpClientDefaultConfig;var x=c(29);b.SingleOneWayBindingBase=x.SingleOneWayBindingBase,b.MultiOneWayBindingBase=x.MultiOneWayBindingBase;var y=c(6);b.res=y;var z=c(16);b.env=z},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(2),f=c(3),g=c(6),h=c(7),i=c(8),j=c(9),k=c(10),l=c(11),m=c(23),n=c(24),o=c(26),p=c(27),q=c(28),r=c(30),s=c(31),t=c(33),u=c(34),v=c(35),w=c(37),x=c(38),y=c(39),z=c(40),A=c(41),B=c(42),C=c(43),D=c(44),E=c(45),F=c(46),G=c(47),H=c(48),I=c(49),J=c(51),K=c(52),L=c(53),M=c(54);M.install();var N=function(a){function b(){a.call(this,"app"),this.defaultExceptionHandler=Rx.Observer.create(function(a){}),this.title=i.property(null!=document?document.title:""),this.version=L.version,window&&(f.isInUnitTest()?this.history=window.createMockHistory():this.history=this.createHistory())}return d(b,a),Object.defineProperty(b.prototype,"mainThreadScheduler",{get:function(){return this._unitTestMainThreadScheduler||this._mainThreadScheduler||Rx.Scheduler.currentThread},set:function(a){f.isInUnitTest()?(this._unitTestMainThreadScheduler=a,this._mainThreadScheduler=this._mainThreadScheduler||a):this._mainThreadScheduler=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"templateEngine",{get:function(){return this._templateEngine||(this._templateEngine=e.injector.get(g.templateEngine)),this._templateEngine},set:function(a){this._templateEngine=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"router",{get:function(){return this._router||(this._router=e.injector.get(g.router)),this._router},enumerable:!0,configurable:!0}),b.prototype.devModeEnable=function(){h.hintEnable=!0,this.defaultExceptionHandler=Rx.Observer.create(function(a){h.error("An onError occurred on an object (usually a computedProperty) that would break a binding or command. To prevent this, subscribe to the thrownExceptions property of your objects: {0}",a)})},b.prototype.createHistory=function(){var a={back:window.history.back.bind(window.history),forward:window.history.forward.bind(window.history),getSearchParameters:function(b){if(b=b||a.location.search.substr(1)){for(var c={},d=b.split("&"),e=0;e<d.length;e++){var f=d[e].split("=");c[f[0]]=decodeURIComponent(f[1])}return c}return{}}};return window.history.pushState&&(a.pushState=window.history.pushState.bind(window.history)),window.history.replaceState&&(a.replaceState=window.history.pushState.bind(window.history)),Object.defineProperty(a,"length",{get:function(){return window.history.length},enumerable:!0,configurable:!0}),Object.defineProperty(a,"state",{get:function(){return window.history.state},enumerable:!0,configurable:!0}),Object.defineProperty(a,"location",{get:function(){return window.location},enumerable:!0,configurable:!0}),a.onPopState=Rx.Observable.fromEventPattern(function(a){return window.addEventListener("popstate",a)},function(a){return window.removeEventListener("popstate",a)}).publish().refCount(),a},b.prototype.register=function(){e.injector.register(g.app,this).register(g.expressionCompiler,k).register(g.templateEngine,[m["default"]],!0).register(g.domManager,[g.expressionCompiler,g.app,l.DomManager],!0).register(g.router,[g.domManager,g.app,I.Router],!0).register(g.messageBus,[J["default"]],!0).register(g.httpClient,[K["default"]],!1),e.injector.register("bindings.module",[g.domManager,g.app,o["default"]],!0).register("bindings.command",[g.domManager,g.app,n["default"]],!0).register("bindings.if",[g.domManager,g.app,p.IfBinding],!0).register("bindings.with",[g.domManager,g.app,w["default"]],!0).register("bindings.notif",[g.domManager,g.app,p.NotIfBinding],!0).register("bindings.css",[g.domManager,g.app,q.CssBinding],!0).register("bindings.attr",[g.domManager,g.app,q.AttrBinding],!0).register("bindings.style",[g.domManager,g.app,q.StyleBinding],!0).register("bindings.text",[g.domManager,g.app,r.TextBinding],!0).register("bindings.html",[g.domManager,g.app,r.HtmlBinding],!0).register("bindings.visible",[g.domManager,g.app,r.VisibleBinding],!0).register("bindings.hidden",[g.domManager,g.app,r.HiddenBinding],!0).register("bindings.enabled",[g.domManager,g.app,r.EnableBinding],!0).register("bindings.disabled",[g.domManager,g.app,r.DisableBinding],!0).register("bindings.foreach",[g.domManager,g.app,s["default"]],!0).register("bindings.event",[g.domManager,g.app,t["default"]],!0).register("bindings.keyPress",[g.domManager,g.app,y["default"]],!0).register("bindings.textInput",[g.domManager,g.app,z["default"]],!0).register("bindings.checked",[g.domManager,g.app,x["default"]],!0).register("bindings.selectedValue",[g.domManager,g.app,A["default"]],!0).register("bindings.component",[g.domManager,g.app,B["default"]],!0).register("bindings.value",[g.domManager,g.app,u["default"]],!0).register("bindings.hasFocus",[g.domManager,g.app,v["default"]],!0).register("bindings.view",[g.domManager,g.router,g.app,D["default"]],!0).register("bindings.sref",[g.domManager,g.router,g.app,E["default"]],!0).register("bindings.sactive",[g.domManager,g.router,g.app,C["default"]],!0).register("bindings.simple",[g.domManager,g.app,F["default"]],!1),e.injector.register("components.radiogroup",[g.templateEngine,H["default"]]).register("components.select",[g.templateEngine,G["default"]]),this.binding("module","bindings.module").binding("css","bindings.css").binding("attr","bindings.attr").binding("style","bindings.style").binding("command","bindings.command").binding("if","bindings.if").binding("with","bindings.with").binding("ifnot","bindings.notif").binding("text","bindings.text").binding("html","bindings.html").binding("visible","bindings.visible").binding("hidden","bindings.hidden").binding("disabled","bindings.disabled").binding("enabled","bindings.enabled").binding("foreach","bindings.foreach").binding("event","bindings.event").binding(["keyPress","keypress"],"bindings.keyPress").binding(["textInput","textinput"],"bindings.textInput").binding("checked","bindings.checked").binding("selectedValue","bindings.selectedValue").binding("component","bindings.component").binding("value","bindings.value").binding(["hasFocus","hasfocus"],"bindings.hasFocus").binding("view","bindings.view").binding(["sref","stateRef","stateref"],"bindings.sref").binding(["sactive","stateActive","stateactive"],"bindings.sactive"),this.component("wx-radiogroup",{resolve:"components.radiogroup"}).component("wx-select",{resolve:"components.select"}),j.modules.app={instance:this}},b}(j.Module),O=new N;b.app=O,O.register(),b.router=e.injector.get(g.router),b.messageBus=e.injector.get(g.messageBus)},function(a,b,c){"use strict";var d=c(3),e=c(6),f=function(){function a(){this.registrations={}}return a.prototype.register=function(){var a,b=arguments[0],c=arguments[1],e=arguments[2];if(this.registrations.hasOwnProperty(b)&&d.throwError("'{0}' is already registered",b),d.isFunction(c))a=function(a,b){return c.apply(null,a)};else if(Array.isArray(c)){var f=this,g=c.pop(),h=c;a=function(a,c){var e=h.map(function(a){try{return f.get(a,void 0,c)}catch(e){return d.throwError("Error resolving dependency '{0}' for '{1}': {2}",a,b,e)}}),i=[null].concat(e).concat(a),j=g.bind.apply(g,i);return new j}}else a=function(a,b){return c};return this.registrations[b]={factory:a,isSingleton:e},this},a.prototype.get=function(a,b,c){c=c||{},c.hasOwnProperty(a)&&d.throwError("Detected circular dependency a from '{0}' to '{1}'",Object.keys(c).join(", "),a);var e=this.registrations[a];if(void 0===e&&d.throwError("'{0}' is not registered",a),e.isSingleton&&e.value)return e.value;var f={};f[a]=!0,d.extend(c,f);var g=e.factory(b,f);return e.isSingleton&&(e.value=g),g},a.prototype.resolve=function(a,b){var c=a.pop();d.isFunction(c)||d.throwError("Error resolving inline-annotated-array. Constructor must be of type 'function' but is '{0}",typeof c);var e=this,f=a.map(function(b){try{return e.get(b,void 0,a)}catch(f){return d.throwError("Error resolving dependency '{0}' for '{1}': {2}",b,Object.getPrototypeOf(c),f)}}),g=[null].concat(f).concat(b),h=c.bind.apply(c,g);return new h},a}();b.injector=new f,b.injector.register(e.injector,function(){return new f})},function(a,b,c){"use strict";function d(){return"undefined"==typeof this}function e(a){var b=typeof a;return"boolean"===b||"number"===b||"string"===b}function f(a,b){if(null==a||e(a))return!1;var c=a;return x(c.queryInterface)?c.queryInterface(b):!1}function g(a,b){return Object.keys(a).filter(function(c){var d=a[c];return f(d,b)}).map(function(b){return new M(b,a[b])})}function h(a){Object.keys(a).filter(function(b){var c=a[b];return null!=c&&x(c.dispose)}).map(function(b){return a[b]}).forEach(function(a){return a.dispose()})}function i(a){return null==a?!1:f(a,J["default"].IObservableProperty)}function j(a){return null==a?!1:f(a,J["default"].IObservableReadOnlyProperty)}function k(a){return null==a?!1:Rx.Scheduler.isScheduler(a)}function l(a){return null==a?!1:a instanceof L}function m(a){return null==a?!1:Rx.helpers.isPromise(a)}function n(a){return i(a)?a():a}function o(a){if(i(a)){var b=a;return b.changed.startWith(b())}return l(a)?a:H("getObservable: '"+a+"' is neither observable property nor observable")}function p(){return window&&window.jasmine&&void 0!==window.jasmine.version_?!0:window&&window.getJasmineRequireObj&&"function"==typeof window.getJasmineRequireObj?!0:!1}function q(a){for(var b=[],c=0,d=a.length;d>c;c++)b.push(a[c]);return b}function r(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];var d=/\{\d+\}/g;return a.replace(d,function(a){return b[a.match(/\d+/)]})}function s(a,b,c){var d;if(c)for(d in a)b[d]=a[d];else for(var e=Object.getOwnPropertyNames(a),f=0;f<e.length;f++)d=e[f],b[d]=a[d];return b}function t(a,b){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];if(c){var e=a.className.match(K)||[],f=void 0,g=void 0;if(b)for(var h=0;h<c.length;h++)g=c[h],f=e.indexOf(g),-1===f&&e.push(g);else for(var h=0;h<c.length;h++)g=c[h],f=e.indexOf(g),-1!==f&&e.splice(f,1);a.className=e.join(" ")}}function u(a,b){var c=a.className.match(K)||[];return-1!==c.indexOf(b)}function v(a){a.getBoundingClientRect()}function w(a){return a instanceof HTMLButtonElement||a instanceof HTMLAnchorElement||a instanceof HTMLInputElement||a instanceof HTMLFieldSetElement||a instanceof HTMLLinkElement||a instanceof HTMLOptGroupElement||a instanceof HTMLOptionElement||a instanceof HTMLSelectElement||a instanceof HTMLTextAreaElement}function x(a){return"function"==typeof a||!1}function y(a){return f(a,J["default"].IDisposable)||x(a.dispose)}function z(a,b,c,d){var e={}.toString;if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;var f=e.call(a);if(f!==e.call(b))return!1;switch(f){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}var g="[object Array]"===f;if(!g){if("object"!=typeof a||"object"!=typeof b)return!1;var h=a.constructor,i=b.constructor;if(h!==i&&!(x(h)&&h instanceof h&&x(i)&&i instanceof i)&&"constructor"in a&&"constructor"in b)return!1}c=c||[],d=d||[];for(var j=c.length;j--;)if(c[j]===a)return d[j]===b;if(c.push(a),d.push(b),g){if(j=a.length,j!==b.length)return!1;for(;j--;)if(!z(a[j],b[j],c,d))return!1}else{var k=Object.keys(a),l=void 0;if(j=k.length,Object.keys(b).length!==j)return!1;for(;j--;)if(l=k[j],!b.hasOwnProperty(l)||!z(a[l],b[l],c,d))return!1}return c.pop(),d.pop(),!0}function A(a){for(var b=a.length,c=new Array(b),d=0;b>d;d++)c[d]=a[d].cloneNode(!0);return c}function B(a){return Array.prototype.slice.call(a)}function C(a){return B(a.childNodes)}function D(a,b){if(!a)throw new Error("disp");if(!b)throw new Error("action");try{b(a)}finally{a.dispose()}}function E(a){var b=null!=window?window.require:null;return x(b)||H("there's no AMD-module loader available (Hint: did you forget to include RequireJS in your project?)"),Rx.Observable.create(function(c){try{b([a],function(a){c.onNext(a),c.onCompleted()},function(a){c.onError(a)})}catch(d){c.onError(d)}return Rx.Disposable.empty})}function F(a,b,c){void 0===c&&(c=!1);var d=f(a,J["default"].IHandleObservableErrors)?a.thrownExceptions:b;return Rx.Observable.create(function(b){var e=new Rx.CompositeDisposable,f=g(a,J["default"].IObservableProperty);return f.forEach(function(a){var f=a.property,g=c?f.changing:f.changed;e.add(g.subscribe(function(c){var e=new I.PropertyChangedEventArgs(self,a.propertyName);try{b.onNext(e)}catch(f){d.onNext(f)}}))}),e}).publish().refCount()}function G(){if(2===arguments.length)return o(arguments[0]).select(arguments[1]);var a=q(arguments),b=a.pop();return(i(b)||l(b))&&(a.push(b),b=function(){return q(arguments)}),a=a.map(function(a){return o(a)}),a.push(b),Rx.Observable.combineLatest.apply(this,a)}function H(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];var d="WebRx: "+r(a,b);throw new Error(d)}var I=c(4),J=c(5),K=/\S+/g,L=Rx.Observable;b.noop=function(){},b.isStrictMode=d,b.isPrimitive=e,b.queryInterface=f,b.getOwnPropertiesImplementingInterface=g,b.disposeMembers=h,b.isProperty=i,b.isReadOnlyProperty=j,b.isRxScheduler=k,b.isRxObservable=l,b.isPromise=m,b.unwrapProperty=n,b.getObservable=o,b.isInUnitTest=p,b.args2Array=q,b.formatString=r,b.extend=s;var M=function(){function a(a,b){this.property=b,this.propertyName=a}return a}();b.PropertyInfo=M,b.toggleCssClass=t,b.hasCssClass=u,b.triggerReflow=v,b.elementCanBeDisabled=w,b.isFunction=x,b.isDisposable=y,b.isEqual=z,b.cloneNodeArray=A,b.nodeListToArray=B,b.nodeChildrenToArray=C,b.using=D,b.observableRequire=E,b.observeObject=F,b.whenAny=G,b.throwError=H},function(a,b){"use strict";var c=function(){function a(a,b){this.propertyName=b,this.sender=a}return a}();b.PropertyChangedEventArgs=c},function(a,b){"use strict";var c=function(){function a(){}return a.IDisposable="IDisposable",a.IObservableProperty="IObservableProperty",a.IObservableReadOnlyProperty="IObservableReadOnlyProperty",a.IObservableList="IObservableList",a.ICommand="ICommand",a.IHandleObservableErrors="IHandleObservableErrors",a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c},function(a,b){"use strict";b.app="app",b.injector="injector",b.domManager="domservice",b.router="router",b.messageBus="messageBus",b.expressionCompiler="expressioncompiler",b.templateEngine="templateEngine",b.httpClient="httpClient",b.simpleBindingHandler="bindings.simple",b.hasValueBindingValue="has.bindings.value",b.valueBindingValue="bindings.value"},function(a,b,c){"use strict";function d(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];try{console.log.apply(console,arguments)}catch(c){try{window.opera.postError.apply(window.opera,arguments)}catch(c){alert(Array.prototype.join.call(arguments," "))}}}function e(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];b.length&&(a=i.formatString.apply(null,[a].concat(b))),d("**** WebRx Critical: "+a)}function f(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];b.length&&(a=i.formatString.apply(null,[a].concat(b))),d("*** WebRx Error: "+a)}function g(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];b.length&&(a=i.formatString.apply(null,[a].concat(b))),d("* WebRx Info: "+a)}function h(a){for(var c=[],e=1;e<arguments.length;e++)c[e-1]=arguments[e];b.hintEnable&&(c.length&&(a=i.formatString.apply(null,[a].concat(c))),d("* WebRx Hint: "+a))}var i=c(3);b.hintEnable=!1,b.critical=e,b.error=f,b.info=g,b.hint=h},function(a,b,c){"use strict";function d(a){var b=function(a){return arguments.length>0?void(a!==b.value&&(b.changingSubject.onNext(a),b.value=a,b.changedSubject.onNext(a))):b.value};return b.queryInterface=function(a){return a===e["default"].IObservableProperty||a===e["default"].IDisposable},b.dispose=function(){},void 0!==a&&(b.value=a),b.changedSubject=new Rx.Subject,b.changed=b.changedSubject.asObservable(),b.changingSubject=new Rx.Subject,b.changing=b.changingSubject.asObservable(),b}var e=c(5);b.property=d},function(a,b,c){"use strict";function a(a,c){return b.modules[a]=c,this}function d(a){var c,d=b.modules[a],g=void 0;if(null!=d)if(Array.isArray(d))c=new h(a),e.injector.resolve(d,c),g=Rx.Observable["return"](c);else if(f.isFunction(d))c=new h(a),d(c),g=Rx.Observable["return"](c);else{var i=d;i.instance?g=Rx.Observable["return"](i.instance):(c=new h(a),i.resolve?(e.injector.get(i.resolve,c),g=Rx.Observable["return"](c)):i.require&&(g=f.observableRequire(i.require)["do"](function(a){return a(c)}).select(function(a){return c})))}else g=Rx.Observable["return"](void 0);return g.take(1)["do"](function(c){return b.modules[a]={instance:c}})}var e=c(2),f=c(3),g=c(6),h=function(){function a(a){this.bindings={},this.components={},this.expressionFilters={},this.animations={},this.name=a}return a.prototype.merge=function(a){var b=a;return f.extend(b.components,this.components),f.extend(b.bindings,this.bindings),f.extend(b.expressionFilters,this.expressionFilters),f.extend(b.animations,this.animations),this},a.prototype.component=function(a,b){return this.components[a]=b,this},a.prototype.hasComponent=function(a){return null!=this.components[a]},a.prototype.loadComponent=function(a,b){return this.initializeComponent(this.instantiateComponent(a),b)},a.prototype.binding=function(){var a,b=this,c=f.args2Array(arguments),d=c.shift();return 0===c.length?(a=this.bindings[d],"string"==typeof a&&(a=e.injector.get(a),this.bindings[d]=a),a):(a=c.shift(),Array.isArray(d)?d.forEach(function(c){return b.registerBinding(c,a)}):this.registerBinding(d,a,c.shift()),this)},a.prototype.registerBinding=function(a,b,c){if("string"==typeof b||f.isFunction(b.applyBinding))this.bindings[a]=b;else{var d=e.injector.get(g.simpleBindingHandler);d.inner=b,d.controlsDescendants=!!c,this.bindings[a]=d}},a.prototype.filter=function(){var a,b=f.args2Array(arguments),c=b.shift();return 0===b.length?(a=this.expressionFilters[c],"string"==typeof a&&(a=e.injector.get(a),this.bindings[c]=a),a):(a=b.shift(),this.expressionFilters[c]=a,this)},a.prototype.filters=function(){return this.expressionFilters},a.prototype.animation=function(){var a,b=f.args2Array(arguments),c=b.shift();return 0===b.length?(a=this.animations[c],"string"==typeof a&&(a=e.injector.get(a),this.bindings[c]=a),a):(a=b.shift(),this.animations[c]=a,this)},Object.defineProperty(a.prototype,"app",{get:function(){return e.injector.get(g.app)},enumerable:!0,configurable:!0}),a.prototype.instantiateComponent=function(a){var b=this,c=this.components[a],d=void 0;if(null!=c)if(f.isRxObservable(c))d=c;else{if(f.isPromise(c))return Rx.Observable.fromPromise(c);var g=c;if(g.instance)d=Rx.Observable["return"](g.instance);else if(g.resolve){var h=e.injector.get(g.resolve);d=Rx.Observable["return"](h)}else d=g.require?f.observableRequire(g.require):Rx.Observable["return"](g)}else d=Rx.Observable["return"](void 0);return d["do"](function(c){return b.components[a]={instance:c}})},a.prototype.initializeComponent=function(a,b){var c=this;return a.take(1).selectMany(function(a){return null==a?Rx.Observable["return"](void 0):Rx.Observable.combineLatest(a.template?c.loadComponentTemplate(a.template,b):Rx.Observable["return"](void 0),a.viewModel?c.loadComponentViewModel(a.viewModel,b):Rx.Observable["return"](void 0),function(c,d){return f.isFunction(d)&&(d=new d(b)),{template:c,viewModel:d,preBindingInit:a.preBindingInit,postBindingInit:a.postBindingInit}})}).take(1)},a.prototype.loadComponentTemplate=function(a,b){var c,d,g=this;if(f.isFunction(a))return c=a(b),f.isRxObservable(a)?a:("string"==typeof c&&(c=this.app.templateEngine.parse(a(b))),Rx.Observable["return"](c));if("string"==typeof a)return c=this.app.templateEngine.parse(a),Rx.Observable["return"](c);if(Array.isArray(a))return Rx.Observable["return"](a);if("object"==typeof a){var h=a;if(h.resolve)return c=e.injector.get(h.resolve),Rx.Observable["return"](c);if(h.promise){var i=h.promise;return Rx.Observable.fromPromise(i)}if(h.observable)return h.observable;if(h.require)return f.observableRequire(h.require).select(function(a){return g.app.templateEngine.parse(a)});if(h.select)return d=null!=document?document.getElementById(h.select)||document.querySelector(h.select):null,c=null!=d?this.app.templateEngine.parse(d.innerHTML):[],Rx.Observable["return"](c)}return f.throwError("invalid template descriptor")},a.prototype.loadComponentViewModel=function(a,b){var c;if(f.isFunction(a))return Rx.Observable["return"](a);if(Array.isArray(a))return c=e.injector.resolve(a,b),Rx.Observable["return"](c);if("object"==typeof a){var d=a;if(d.resolve)return c=e.injector.get(d.resolve,b),Rx.Observable["return"](c);if(d.observable)return d.observable;if(d.promise){var g=d.promise;return Rx.Observable.fromPromise(g)}if(d.require)return f.observableRequire(d.require);if(d.instance)return Rx.Observable["return"](d.instance)}return f.throwError("invalid view-model descriptor")},a}();b.Module=h,b.modules={},b.module=a,b.loadModule=d},function(a,b,c){"use strict";function d(a,b){var c;for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function e(a){var b=a.trim();123===b.charCodeAt(0)&&(b=b.slice(1,-1));var c,d,e=new Array,f=b.match(A),g=0;if(f){f.push(",");for(var h=0,i=void 0;i=f[h];++h){var j=i.charCodeAt(0);if(44===j){if(0>=g){c&&e.push(d?{key:c,value:d.join("")}:{unknown:c,value:void 0}),c=d=g=0;continue}}else if(58===j){if(!d)continue}else if(47===j&&h&&i.length>1){var k=f[h-1].match(B);k&&!C[k[0]]&&(b=b.substr(b.indexOf(i)+1),f=b.match(A),f.push(","),h=-1,i="/")}else if(40===j||123===j||91===j)++g;else if(41===j||125===j||93===j)--g;else if(!c&&!d){c=34===j||39===j?i.slice(1,-1):i;continue}d?d.push(i):d=[i]}}return e}function f(a){return"undefined"!=typeof a}function g(a,b,c,d,e,f,g){var h=arguments;throw b=b.replace(/{(\d)}/g,function(a){return h[2+parseInt(a[1])]}),new SyntaxError(b)}function h(a){return"string"==typeof a?a.toLowerCase():a}function i(a,b){if("constructor"===a)throw g("isecfld",'Referencing "constructor" field in WebRx expressions is disallowed! Expression: {0}',b);return a}function j(a,b){if(a){if(a.constructor===a)throw g("isecfn","Referencing Function in WebRx expressions is disallowed! Expression: {0}",b);if(a.document&&a.location&&a.alert&&a.setInterval)throw g("isecwindow","Referencing the Window in WebRx expressions is disallowed! Expression: {0}",b);if(a.children&&(a.nodeName||a.prop&&a.attr&&a.find))throw g("isecdom","Referencing DOM nodes in WebRx expressions is disallowed! Expression: {0}",b)}return a}function k(){return 0}function l(a,b,c,d,e,f){var g,h,j=b.split("."),k=q(f);if(k)for(var l=0;j.length>1;l++)g=i(j.shift(),d),h=k.readFieldHook?k.readFieldHook(a,g):a[g],h||(h={},k.writeFieldHook?k.writeFieldHook(a,g,h):a[g]=h),a=h;else for(var m=0;j.length>1;m++)g=i(j.shift(),d),h=a[g],h||(h={},a[g]=h),a=h;return g=i(j.shift(),d),k&&k.writeFieldHook?k.writeFieldHook(a,g,c):a[g]=c,c}function m(a,b,c,d,e,f,g){return i(a,f),i(b,f),i(c,f),i(d,f),i(e,f),function(f,g){var h=g&&g.hasOwnProperty(a)?g:f,i=q(g);return i&&i.readFieldHook?null==h?h:(h=i.readFieldHook(h,a),b?null==h?void 0:(h=i.readFieldHook(h,b),c?null==h?void 0:(h=i.readFieldHook(h,c),d?null==h?void 0:(h=i.readFieldHook(h,d),e?null==h?void 0:h=i.readFieldHook(h,e):h):h):h):h):null==h?h:(h=h[a],b?null==h?void 0:(h=h[b],c?null==h?void 0:(h=h[c],d?null==h?void 0:(h=h[d],e?null==h?void 0:h=h[e]:h):h):h):h)}}function n(a,b){return i(a,b),function(b,c){if(b=c&&c.hasOwnProperty(a)?c:b,null==b)return void 0;var d=q(c);return d&&d.readFieldHook?d.readFieldHook(b,a):b[a]}}function o(a,b,c){return i(a,c),i(b,c),function(c,d){var e=q(d);return e&&e.readFieldHook?(c=d&&d.hasOwnProperty(a)?d:c,null==c?void 0:(c=e.readFieldHook(c,a),null==c?void 0:e.readFieldHook(c,b))):(c=(d&&d.hasOwnProperty(a)?d:c)[a],null==c?void 0:c[b])}}function p(a,b,c){if(I.hasOwnProperty(a))return I[a];var d,e=a.split("."),f=e.length;return d=1===f?n(e[0],c):2===f?o(e[0],e[1],c):6>f?m(e[0],e[1],e[2],e[3],e[4],c,b):function(a,d){var g={};Object.keys(d).forEach(function(a){return g[a]=d[a]});var h,i=0;do h=m(e[i++],e[i++],e[i++],e[i++],e[i++],c,b)(a,d),a=h,d={},Object.keys(g).forEach(function(a){return d[a]=g[a]});while(f>i);return h},"hasOwnProperty"!==a&&(I[a]=d),d}function q(a){return void 0!==a?a[D]:void 0}function r(a,b){a[D]=b}function s(a,b,c){if("string"!=typeof a)throw new TypeError("src must be a string, instead saw '"+typeof a+"'");var d=new G({}),e=new H(d,b);if(!c)return e.parse(a);var f=c[a];return f||(f=c[a]=e.parse(a)),f}var t=c(3),u='"(?:[^"\\\\]|\\\\.)*"',v="'(?:[^'\\\\]|\\\\.)*'",w="/(?:[^/\\\\]|\\\\.)*/w*",x=",\"'{}()/:[\\]",y="[^\\s:,/][^"+x+"]*[^\\s"+x+"]",z="[^\\s]",A=RegExp(u+"|"+v+"|"+w+"|"+y+"|"+z,"g"),B=/[\])"'A-Za-z0-9_$]+$/,C={"in":1,"return":1,"typeof":1};b.parseObjectLiteral=e;var D="___runtimeHooks",E={"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:t.noop,"+":function(a,b,c,d){return c=c(a,b),d=d(a,b),f(c)?f(d)?c+d:c:f(d)?d:void 0},"-":function(a,b,c,d){return c=c(a,b),d=d(a,b),(f(c)?c:0)-(f(d)?d:0)},"*":function(a,b,c,d){return c(a,b)*d(a,b)},"/":function(a,b,c,d){return c(a,b)/d(a,b)},"%":function(a,b,c,d){return c(a,b)%d(a,b)},"^":function(a,b,c,d){return c(a,b)^d(a,b)},"=":t.noop,"===":function(a,b,c,d){return c(a,b)===d(a,b)},"!==":function(a,b,c,d){return c(a,b)!==d(a,b)},"==":function(a,b,c,d){return c(a,b)===d(a,b)},"!=":function(a,b,c,d){return c(a,b)!==d(a,b)},"<":function(a,b,c,d){return c(a,b)<d(a,b)},">":function(a,b,c,d){return c(a,b)>d(a,b)},"<=":function(a,b,c,d){return c(a,b)<=d(a,b)},">=":function(a,b,c,d){return c(a,b)>=d(a,b)},"&&":function(a,b,c,d){return c(a,b)&&d(a,b)},"||":function(a,b,c,d){return c(a,b)||d(a,b)},"&":function(a,b,c,d){return c(a,b)&d(a,b)},"|":function(a,b,c,d){return d(a,b)(a,b,c(a,b))},"!":function(a,b,c){return!c(a,b)}},F={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},G=function(){function a(a){this.options=a}return a.prototype.lex=function(a){this.text=a,this.index=0,this.ch=void 0,this.lastCh=":",this.tokens=[];for(var b,c=[];this.index<this.text.length;){if(this.ch=this.text.charAt(this.index),this.is("\"'"))this.readString(this.ch);else if(this.isNumber(this.ch)||this.is(".")&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(this.ch))this.readIdent(),this.was("{,")&&"{"===c[0]&&(b=this.tokens[this.tokens.length-1])&&(b.json=-1===b.text.indexOf("."));else if(this.is("(){}[].,;:?"))this.tokens.push({index:this.index,text:this.ch,json:this.was(":[,")&&this.is("{[")||this.is("}]:,")}),this.is("{[")&&c.unshift(this.ch),this.is("}]")&&c.shift(),this.index++;else{if(this.isWhitespace(this.ch)){this.index++;continue}var d=this.ch+this.peek(),e=d+this.peek(2),f=E[this.ch],g=E[d],h=E[e];h?(this.tokens.push({index:this.index,text:e,fn:h}),this.index+=3):g?(this.tokens.push({index:this.index,text:d,fn:g}),this.index+=2):f?(this.tokens.push({index:this.index,text:this.ch,fn:f,json:this.was("[,:")&&this.is(" + -")}),this.index+=1):this.throwError("Unexpected next character ",this.index,this.index+1)}this.lastCh=this.ch}return this.tokens},a.prototype.is=function(a){return-1!==a.indexOf(this.ch)},a.prototype.was=function(a){return-1!==a.indexOf(this.lastCh)},a.prototype.peek=function(a){var b=a||1;return this.index+b<this.text.length?this.text.charAt(this.index+b):!1},a.prototype.isNumber=function(a){return a>="0"&&"9">=a},a.prototype.isWhitespace=function(a){return" "===a||"\r"===a||"	"===a||"\n"===a||""===a||" "===a},a.prototype.isIdent=function(a){return a>="a"&&"z">=a||a>="A"&&"Z">=a||"_"===a||"$"===a||"@"===a},a.prototype.isExpOperator=function(a){return"-"===a||"+"===a||this.isNumber(a)},a.prototype.throwError=function(a,b,c){c=c||this.index;var d=f(b)?"s "+b+"-"+this.index+" ["+this.text.substring(b,c)+"]":" "+c;throw g("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",a,d,this.text)},a.prototype.readNumber=function(){for(var a="",b=this.index;this.index<this.text.length;){var c=h(this.text.charAt(this.index));if("."===c||this.isNumber(c))a+=c;else{var d=this.peek();if("e"===c&&this.isExpOperator(d))a+=c;else if(this.isExpOperator(c)&&d&&this.isNumber(d)&&"e"===a.charAt(a.length-1))a+=c;else{if(!this.isExpOperator(c)||d&&this.isNumber(d)||"e"!==a.charAt(a.length-1))break;this.throwError("Invalid exponent")}}this.index++}a=1*a,this.tokens.push({index:b,text:a,json:!0,fn:function(){return a}})},a.prototype.readIdent=function(){for(var a,b,c,e,f=this,g="",h=this.index;this.index<this.text.length&&(e=this.text.charAt(this.index),"."===e||this.isIdent(e)||this.isNumber(e));)"."===e&&(a=this.index),g+=e,this.index++;if(a)for(b=this.index;b<this.text.length;){if(e=this.text.charAt(b),"("===e){c=g.substr(a-h+1),g=g.substr(0,a-h),this.index=b;break}if(!this.isWhitespace(e))break;b++}var i={index:h,text:g};if(E.hasOwnProperty(g))i.fn=E[g],i.json=E[g];else{var j=p(g,this.options,this.text);i.fn=d(function(a,b){return j(a,b)},{assign:function(a,b,c){return l(a,g,b,f.text,f.options,c)}})}this.tokens.push(i),c&&(this.tokens.push({index:a,text:".",json:!1}),this.tokens.push({index:a+1,text:c,json:!1}))},a.prototype.readString=function(a){var b=this.index;this.index++;for(var c="",d=a,e=!1;this.index<this.text.length;){var f=this.text.charAt(this.index);if(d+=f,e){if("u"===f){var g=this.text.substring(this.index+1,this.index+5);g.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+g+"]"),this.index+=4,c+=String.fromCharCode(parseInt(g,16))}else{var h=F[f];c+=h?h:f}e=!1}else if("\\"===f)e=!0;else{if(f===a)return this.index++,void this.tokens.push({index:b,text:d,string:c,json:!0,fn:function(){return c}});c+=f}this.index++}this.throwError("Unterminated quote",b)},a}(),H=function(){function a(a,b){this.lexer=a,this.options=b||{filters:{}}}return a.prototype.parse=function(a){this.text=a,this.tokens=this.lexer.lex(a);var b=this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),b.literal=!!b.literal,b.constant=!!b.constant,b},a.prototype.primary=function(){var a;if(this.expect("("))a=this.filterChain(),this.consume(")");else if(this.expect("["))a=this.arrayDeclaration();else if(this.expect("{"))a=this.object();else{var b=this.expect();a=b.fn,a||this.throwError("not a primary expression",b),b.json&&(a.constant=!0,a.literal=!0)}for(var c,d;c=this.expect("(","[",".");)"("===c.text?(a=this.functionCall(a,d),d=null):"["===c.text?(d=a,a=this.objectIndex(a)):"."===c.text?(d=a,a=this.fieldAccess(a)):this.throwError("IMPOSSIBLE");return a},a.prototype.throwError=function(a,b){throw g("syntax","WebRx Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",b.text,a,b.index+1,this.text,this.text.substring(b.index));
},a.prototype.peekToken=function(){if(0===this.tokens.length)throw g("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},a.prototype.peek=function(a,b,c,d){if(this.tokens.length>0){var e=this.tokens[0],f=e.text;if(f===a||f===b||f===c||f===d||!a&&!b&&!c&&!d)return e}return!1},a.prototype.expect=function(a,b,c,d){var e=this.peek(a,b,c,d);return e?(this.tokens.shift(),e):!1},a.prototype.consume=function(a){this.expect(a)||this.throwError("is unexpected, expecting ["+a+"]",this.peek())},a.prototype.unaryFn=function(a,b){return d(function(c,d){return a(c,d,b)},{constant:b.constant})},a.prototype.ternaryFn=function(a,b,c){return d(function(d,e){return a(d,e)?b(d,e):c(d,e)},{constant:a.constant&&b.constant&&c.constant})},a.prototype.binaryFn=function(a,b,c){return d(function(d,e){return b(d,e,a,c)},{constant:a.constant&&c.constant})},a.prototype.statements=function(){for(var a=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&a.push(this.filterChain()),!this.expect(";"))return 1===a.length?a[0]:function(b,c){for(var d,e=0;e<a.length;e++){var f=a[e];f&&(d=f(b,c))}return d}},a.prototype.filterChain=function(){for(var a,b=this.expression();;){if(!(a=this.expect("|")))return b;b=this.binaryFn(b,a.fn,this.filter())}},a.prototype.filter=function(){for(var a=this.expect(),b=this.options.filters[a.text],c=[];;){if(!(a=this.expect(":"))){var d=function(a,d,e){for(var f=[e],g=0;g<c.length;g++)f.push(c[g](a,d));return b.apply(a,f)};return function(){return d}}c.push(this.expression())}},a.prototype.expression=function(){return this.assignment()},a.prototype.assignment=function(){var a,b,c=this.ternary();return(b=this.expect("="))?(c.assign||this.throwError("implies assignment but ["+this.text.substring(0,b.index)+"] can not be assigned to",b),a=this.ternary(),function(b,d){return c.assign(b,a(b,d),d)}):c},a.prototype.ternary=function(){var a,b,c=this.logicalOR();if(b=this.expect("?")){if(a=this.ternary(),b=this.expect(":"))return this.ternaryFn(c,a,this.ternary());this.throwError("expected :",b)}return c},a.prototype.logicalOR=function(){for(var a,b=this.logicalAND();;){if(!(a=this.expect("||")))return b;b=this.binaryFn(b,a.fn,this.logicalAND())}},a.prototype.logicalAND=function(){var a,b=this.equality();return(a=this.expect("&&"))&&(b=this.binaryFn(b,a.fn,this.logicalAND())),b},a.prototype.equality=function(){var a,b=this.relational();return(a=this.expect("==","!=","===","!=="))&&(b=this.binaryFn(b,a.fn,this.equality())),b},a.prototype.relational=function(){var a,b=this.additive();return(a=this.expect("<",">","<=",">="))&&(b=this.binaryFn(b,a.fn,this.relational())),b},a.prototype.additive=function(){for(var a,b=this.multiplicative();a=this.expect("+","-");)b=this.binaryFn(b,a.fn,this.multiplicative());return b},a.prototype.multiplicative=function(){for(var a,b=this.unary();a=this.expect("*","/","%");)b=this.binaryFn(b,a.fn,this.unary());return b},a.prototype.unary=function(){var a;return this.expect("+")?this.primary():(a=this.expect("-"))?this.binaryFn(k,a.fn,this.unary()):(a=this.expect("!"))?this.unaryFn(a.fn,this.unary()):this.primary()},a.prototype.fieldAccess=function(a){var b=this,c=this.expect().text,e=p(c,this.options,this.text);return d(function(b,c,d){return e(d||a(b,c))},{assign:function(d,e,f){return l(a(d,f),c,e,b.text,b.options,f)}})},a.prototype.objectIndex=function(a){var b=this,c=this.expression();return this.consume("]"),d(function(d,e){var f,g=a(d,e),h=c(d,e);if(!g)return void 0;var i=q(e);return f=i&&i.readIndexHook?i.readIndexHook(g,h):g[h],f=j(f,b.text)},{assign:function(d,e,f){var g=c(d,f),h=j(a(d,f),b.text),i=q(f);return i&&i.writeIndexHook?i.writeIndexHook(h,g,e):h[g]=e}})},a.prototype.functionCall=function(a,b){this.options.disallowFunctionCalls&&this.throwError("Function calls are not allowed");var c=[];if(")"!==this.peekToken().text)do c.push(this.expression());while(this.expect(","));this.consume(")");var d=this;return function(e,f){for(var g=[],h=b?b(e,f):e,i=0;i<c.length;i++)g.push(c[i](e,f));var k=a(e,f,h)||t.noop;j(h,d.text),j(k,d.text);var l=k.apply?k.apply(h,g):k(g[0],g[1],g[2],g[3],g[4]);return j(l,d.text)}},a.prototype.arrayDeclaration=function(){var a=[],b=!0;if("]"!==this.peekToken().text)do{if(this.peek("]"))break;var c=this.expression();a.push(c),c.constant||(b=!1)}while(this.expect(","));return this.consume("]"),d(function(b,c){for(var d=[],e=0;e<a.length;e++)d.push(a[e](b,c));return d},{literal:!0,constant:b})},a.prototype.object=function(){var a=[],b=!0;if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var c=this.expect(),e=c.string||c.text;this.consume(":");var f=this.expression();a.push({key:e,value:f}),f.constant||(b=!1)}while(this.expect(","));return this.consume("}"),d(function(b,c){for(var d={},e=0;e<a.length;e++){var f=a[e];d[f.key]=f.value(b,c)}return d},{literal:!0,constant:b})},a}(),I={};b.getRuntimeHooks=q,b.setRuntimeHooks=r,b.compileExpression=s},function(a,b,c){"use strict";function d(a,b){i.injector.get(k.domManager).applyBindings(a,b||(null!=window?window.document.documentElement:null))}function e(a){i.injector.get(k.domManager).cleanNode(a)}var f=c(12),g=c(14),h=c(15),i=c(2),j=c(3),k=c(6),l=c(16),m=c(17),n=function(){function a(a,b){this.expressionCache={},this.dataContextExtensions=g.createSet(),this.parserOptions={disallowFunctionCalls:!1},this.nodeState=f.createWeakMap(),this.compiler=a,this.app=b}return a.prototype.applyBindings=function(a,b){(void 0===b||1!==b.nodeType)&&j.throwError("first parameter should be your model, second parameter should be a DOM node!"),this.isNodeBound(b)&&j.throwError("an element must not be bound multiple times!");var c=this.getNodeState(b);c?c.model=a:(c=this.createNodeState(a),this.setNodeState(b,c));var d=this.getDataContext(b);this.applyBindingsRecursive(d,b)},a.prototype.applyBindingsToDescendants=function(a,b){if(b.hasChildNodes())for(var c=0;c<b.childNodes.length;c++){var d=b.childNodes[c];1===d.nodeType&&this.applyBindingsRecursive(a,d)}},a.prototype.cleanNode=function(a){1===a.nodeType&&this.cleanNodeRecursive(a)},a.prototype.cleanDescendants=function(a){if(a.hasChildNodes())for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];1===c.nodeType&&(this.cleanNodeRecursive(c),this.clearNodeState(c))}},a.prototype.getObjectLiteralTokens=function(a){return a=a.trim(),""!==a&&this.isObjectLiteralString(a)?this.compiler.parseObjectLiteral(a):[]},a.prototype.compileBindingOptions=function(a,b){if(a=a.trim(),""===a)return null;if(this.isObjectLiteralString(a)){for(var c={},d=this.compiler.parseObjectLiteral(a),e=void 0,f=0;f<d.length;f++)e=d[f],c[e.key]=this.compileBindingOptions(e.value,b);return c}var g=j.extend(this.parserOptions,{});return g.filters={},j.extend(this.app.filters(),g.filters),b&&"app"!=b.name&&j.extend(b.filters(),g.filters),this.compiler.compileExpression(a,g,this.expressionCache)},a.prototype.getModuleContext=function(a){for(var b;a;){if(b=this.getNodeState(a),null!=b&&null!=b.module)return b.module;a=a.parentNode}return this.app},a.prototype.registerDataContextExtension=function(a){this.dataContextExtensions.add(a)},a.prototype.getDataContext=function(a){for(var b=[],c=this.getNodeState(a),d=a;d;)c=null!=c?c:this.getNodeState(d),null!=c&&null!=c.model&&b.push(c.model),c=null,d=d.parentNode;var e;return e=b.length>0?{$data:b[0],$root:b[b.length-1],$parent:b.length>1?b[1]:null,$parents:b.slice(1)}:{$data:null,$root:null,$parent:null,$parents:[]},this.dataContextExtensions.forEach(function(b){return b(a,e)}),e},a.prototype.createNodeState=function(a,b){return{cleanup:new Rx.CompositeDisposable,model:a,module:b,isBound:!1}},a.prototype.isNodeBound=function(a){var b=this.nodeState.get(a);return null!=b&&!!b.isBound},a.prototype.setNodeState=function(a,b){this.nodeState.set(a,b)},a.prototype.getNodeState=function(a){return this.nodeState.get(a)},a.prototype.clearNodeState=function(a){var b=this.nodeState.get(a);null!=b&&(null!=b.cleanup&&(b.cleanup.dispose(),b.cleanup=void 0),b.model=void 0,b.module=void 0,this.nodeState["delete"](a)),l.cleanExternalData(a)},a.prototype.evaluateExpression=function(a,b){var c=this.createLocals(void 0,b),d=a(b.$data,c);return d},a.prototype.expressionToObservable=function(a,b,c){var d,e,f=this,i=g.createSet();try{d=this.createLocals(i,b),e=a(b.$data,d),c&&c.onNext(!0)}catch(k){return this.app.defaultExceptionHandler.onNext(k),Rx.Observable["return"](void 0)}if(0===i.size)return j.isRxObservable(e)?e:Rx.Observable["return"](e);for(var l,m=new Rx.Subject,n=h.createMap(),o=g.setToArray(i),p=o.length,q=0;p>q;q++)l=o[q],n.set(l,l.replay(null,1).refCount().subscribe(m));var r=Rx.Observable.create(function(h){var k=m.subscribe(function(k){try{var o=g.createSet();d=f.createLocals(o,b),e=a(b.$data,d);for(var p=g.setToArray(i),q=p.length,r=0;q>r;r++)if(l=p[r],!o.has(l)){var s=n.get(l);null!=s&&s.dispose(),n["delete"](l)}p=g.setToArray(o),q=p.length;for(var r=0;q>r;r++)l=p[r],i.add(l),n.has(l)||n.set(l,l.replay(null,1).refCount().subscribe(m));j.isRxObservable(e)?h.onNext(e):h.onNext(Rx.Observable["return"](e)),c&&c.onNext(!0)}catch(t){f.app.defaultExceptionHandler.onNext(t)}});return Rx.Disposable.create(function(){k.dispose(),n.forEach(function(a,b,c){a&&a.dispose()}),n.clear(),n=null,i.clear(),i=null,m.dispose(),m=null,d=null})}),s=j.isRxObservable(e)?e:Rx.Observable["return"](e);return r.startWith(s).concatAll()},a.prototype.applyBindingsInternal=function(b,c,d){var e=!1,f=this.getNodeState(c);f?f.isBound&&j.throwError("an element may be bound multiple times!"):(f=this.createNodeState(),this.setNodeState(c,f));var g,h=c.tagName.toLowerCase();if(d.hasComponent(h)||this.app.hasComponent(h)){var i=c.getAttribute(a.paramsAttributename),k=void 0;k=i?"{ name: '"+h+"', params: { "+c.getAttribute(a.paramsAttributename)+" }}":"{ name: '"+h+"' }",g=[{key:"component",value:k}]}else g=this.getBindingDefinitions(c);if(null!=g&&g.length>0){var l=g.map(function(a){var b=d.binding(a.key);return b||j.throwError("binding '{0}' has not been registered.",a.key),{handler:b,value:a.value}});l.sort(function(a,b){return(b.handler.priority||0)-(a.handler.priority||0)});var m=l.filter(function(a){return a.handler.controlsDescendants}).map(function(a){return"'"+a.value+"'"});m.length>1&&j.throwError("bindings {0} are competing for descendants of target element!",m.join(", ")),e=m.length>0;for(var n=0;n<l.length;n++){var o=l[n],p=o.handler;p.applyBinding(c,o.value,b,f,d)}}return f.isBound=!0,e},a.prototype.isObjectLiteralString=function(a){return"{"===a[0]&&"}"===a[a.length-1]},a.prototype.getBindingDefinitions=function(b){var c=null;if(1===b.nodeType){var d=b.getAttribute(a.bindingAttributeName);d&&(c=d)}return c&&(c=c.trim()),c?this.compiler.parseObjectLiteral(c):null},a.prototype.applyBindingsRecursive=function(a,b,c){if(c=c||this.getModuleContext(b),!this.applyBindingsInternal(a,b,c)&&b.hasChildNodes()){var d=this.getNodeState(b);d&&d.module&&(c=d.module);for(var e=0;e<b.childNodes.length;e++){var f=b.childNodes[e];1===f.nodeType&&this.applyBindingsRecursive(a,f,c)}}},a.prototype.cleanNodeRecursive=function(a){if(a.hasChildNodes())for(var b=a.childNodes.length,c=0;b>c;c++){var d=a.childNodes[c];1===d.nodeType&&this.cleanNodeRecursive(d)}this.clearNodeState(a)},a.prototype.createLocals=function(a,b){var c,d,e,f,g={},h={readFieldHook:function(b,c){var d=!1;if("@"===c[0]&&(d=!0,c=c.substring(1)),e=b[c],j.isProperty(e)){var f=e;d||(e=f()),a&&a.add(f.changed)}return e},writeFieldHook:function(b,c,d){if("@"===c[0]&&(c=c.substring(1)),f=b[c],j.isProperty(f)){var e=f;a&&a.add(e.changed),e(d)}else b[c]=d;return d},readIndexHook:function(b,d){if(m.isList(b)?(c=b,e=c.get(d),a&&a.add(c.listChanged)):e=b[d],j.isProperty(e)){var f=e;e=f(),a&&a.add(f.changed)}return e},writeIndexHook:function(b,e,g){return m.isList(b)?(c=b,f=c.get(e),a&&a.add(c.listChanged),j.isProperty(f)?(d=f,a&&a.add(d.changed),d(g)):c.set(e,g)):j.isProperty(b[e])?(d=f[e],a&&a.add(d.changed),d(g)):b[e]=g,g}};this.compiler.setRuntimeHooks(g,h);for(var i=Object.keys(b),k=i.length,l=0;k>l;l++){var n=i[l];g[n]=b[n]}return g},a.bindingAttributeName="data-bind",a.paramsAttributename="params",a}();b.DomManager=n,b.applyBindings=d,b.cleanNode=e},function(a,b,c){"use strict";function d(a){return"function"==typeof a}function e(a){return a||!i?new g:new WeakMap}var f=c(13),g=function(){function a(){this.inner={}}return a.prototype.set=function(a,b){var c=f.getOid(a);this.inner[c]=b},a.prototype.get=function(a){var b=f.getOid(a);return this.inner[b]},a.prototype.has=function(a){var b=f.getOid(a);return this.inner.hasOwnProperty(b)},a.prototype["delete"]=function(a){var b=f.getOid(a);return delete this.inner[b]},Object.defineProperty(a.prototype,"isEmulated",{get:function(){return!0},enumerable:!0,configurable:!0}),a}(),h=null!=window&&void 0!==window.WeakMap?WeakMap.prototype:void 0,i=null!=window&&d(window.WeakMap)&&d(h.set)&&d(h.get)&&d(h["delete"])&&d(h.has);b.createWeakMap=e},function(a,b){"use strict";function c(a){if(null==a)return void 0;var b=typeof a;if("boolean"===b||"number"===b||"string"===b)return b+":"+a;var c=a[e];return void 0!==c?c:(c=(d++).toString(),Object.defineProperty(a,e,{enumerable:!1,configurable:!1,writable:!1,value:c}),c)}var d=1,e="__wx_oid__"+(new Date).getTime();b.getOid=c},function(a,b,c){"use strict";function d(a){return"function"==typeof a}function e(a){return a||!j?new h:new Set}function f(a){var b=new Array;return a.forEach(function(a){return b.push(a)}),b}var g=c(13),h=function(){function a(){this.values=[],this.keys={}}return a.prototype.add=function(a){var b=g.getOid(a);return this.keys[b]||(this.values.push(a),this.keys[b]=!0),this},a.prototype["delete"]=function(a){var b=g.getOid(a);if(this.keys[b]){var c=this.values.indexOf(a);return this.values.splice(c,1),delete this.keys[b],!0}return!1},a.prototype.has=function(a){var b=g.getOid(a);return this.keys.hasOwnProperty(b)},a.prototype.clear=function(){this.keys={},this.values.length=0},a.prototype.forEach=function(a,b){this.values.forEach(a,b)},Object.defineProperty(a.prototype,"size",{get:function(){return this.values.length},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isEmulated",{get:function(){return!0},enumerable:!0,configurable:!0}),a}(),i=null!=window&&void 0!==window.Set?Set.prototype:void 0,j=null!=window&&d(window.Set)&&d(i.forEach)&&d(i.add)&&d(i.clear)&&d(i["delete"])&&d(i.has);b.createSet=e,b.setToArray=f},function(a,b){"use strict";function c(a){return"function"==typeof a}function d(a){return a||!g?new e:new Map}var e=function(){function a(){this.cacheSentinel={},this.keys=[],this.values=[],this.cache=this.cacheSentinel}return Object.defineProperty(a.prototype,"size",{get:function(){return this.keys.length},enumerable:!0,configurable:!0}),a.prototype.has=function(a){return a===this.cache?!0:this.find(a)>=0?(this.cache=a,!0):!1},a.prototype.get=function(a){var b=this.find(a);return b>=0?(this.cache=a,this.values[b]):void 0},a.prototype.set=function(a,b){return this["delete"](a),this.keys.push(a),this.values.push(b),this.cache=a,this},a.prototype["delete"]=function(a){var b=this.find(a);return b>=0?(this.keys.splice(b,1),this.values.splice(b,1),this.cache=this.cacheSentinel,!0):!1},a.prototype.clear=function(){this.keys.length=0,this.values.length=0,this.cache=this.cacheSentinel},a.prototype.forEach=function(a,b){for(var c=this.size,d=0;c>d;++d){var e=this.keys[d],f=this.values[d];this.cache=e,a.call(this,f,e,this)}},Object.defineProperty(a.prototype,"isEmulated",{get:function(){return!0},enumerable:!0,configurable:!0}),a.prototype.find=function(a){for(var b=this.keys,c=b.length,d=0;c>d;++d)if(b[d]===a)return d;return-1},a}(),f=null!=window&&void 0!==window.Map?Map.prototype:void 0,g=null!=window&&c(window.Map)&&c(f.forEach)&&c(f.set)&&c(f.clear)&&c(f["delete"])&&c(f.has);b.createMap=d},function(a,b,c){"use strict";var d=c(12),e=window,f=null!=e?e.navigator.userAgent:null,g=function(a){return a?parseFloat(a[1]):void 0};null!=e&&e.opera&&e.opera.version&&(b.opera={version:parseInt(e.opera.version())});var h=document&&function(){for(var a=3,b=document.createElement("div"),c=b.getElementsByTagName("i");b.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->",c[0];);return a>4?a:void 0}();if(h&&(b.ie={version:h},10>h)){var i=d.createWeakMap();b.ie.getSelectionChangeObservable=function(a){var b=a.ownerDocument,c=i.get(b);return c?c:(c=Rx.Observable.defer(function(){return Rx.Observable.fromEvent(b,"selectionchange")}).select(function(a){return b}).publish().refCount(),i.set(b,c),c)}}h=g(f.match(/^(?:(?!chrome).)*version\/([^ ]*) safari/i)),h&&(b.safari={version:h}),h=g(f.match(/Firefox\/([^ ]*)/)),h&&(b.firefox={version:h});var j="function"==typeof Array.isArray&&"function"==typeof[].forEach&&"function"==typeof[].map&&"function"==typeof[].some&&"function"==typeof[].indexOf&&"function"==typeof Object.keys&&"function"==typeof Object.defineProperty;b.isSupported=!b.ie||b.ie.version>=9||!b.safari||b.safari.version>=5||(!b.firefox||b.firefox.version>=5)&&j,b.jQueryInstance=null!=window?window.jQuery:null,b.jQueryInstance&&"function"==typeof b.jQueryInstance.cleanData?b.cleanExternalData=function(a){b.jQueryInstance.cleanData([a])}:b.cleanExternalData=function(a){}},function(a,b,c){"use strict";function d(a){return null==a?!1:a instanceof e.ObservableList||a instanceof f.PagedObservableListProjection}var e=c(18),f=c(22);b.isList=d},function(a,b,c){"use strict";function d(a,b,c){return void 0===b&&(b=.3),void 0===c&&(c=null),new q(a,b,c)}var e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},f=c(3),g=c(13),h=c(5),i=c(19),j=c(20),k=c(4),l=c(21),m=c(7),n=c(2),o=c(6),p=c(22),q=function(){function a(a,b,c){void 0===b&&(b=.3),void 0===c&&(c=null),this.push=this.add,this.changeNotificationsSuppressed=0,this.propertyChangeWatchers=null,this.resetChangeThreshold=0,this.resetSubCount=0,this.hasWhinedAboutNoResetSub=!1,this.readonlyExceptionMessage="Derived collections cannot be modified.",this.disposables=new Rx.CompositeDisposable,this.app=n.injector.get(o.app),this.setupRx(a,b,c)}return a.prototype.queryInterface=function(a){return a===h["default"].IObservableList||a===h["default"].IDisposable},a.prototype.dispose=function(){this.clearAllPropertyChangeWatchers(),this.disposables.dispose()},Object.defineProperty(a.prototype,"itemsAdded",{get:function(){return this._itemsAdded||(this._itemsAdded=this.itemsAddedSubject.value.asObservable()),this._itemsAdded},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"beforeItemsAdded",{get:function(){return this._beforeItemsAdded||(this._beforeItemsAdded=this.beforeItemsAddedSubject.value.asObservable()),this._beforeItemsAdded},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"itemsRemoved",{get:function(){return this._itemsRemoved||(this._itemsRemoved=this.itemsRemovedSubject.value.asObservable()),this._itemsRemoved},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"beforeItemsRemoved",{get:function(){return this._beforeItemsRemoved||(this._beforeItemsRemoved=this.beforeItemsRemovedSubject.value.asObservable()),this._beforeItemsRemoved},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"itemReplaced",{get:function(){return this._itemReplaced||(this._itemReplaced=this.itemReplacedSubject.value.asObservable()),this._itemReplaced},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"beforeItemReplaced",{get:function(){return this._beforeItemReplaced||(this._beforeItemReplaced=this.beforeItemReplacedSubject.value.asObservable()),this._beforeItemReplaced},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"beforeItemsMoved",{get:function(){return this._beforeItemsMoved||(this._beforeItemsMoved=this.beforeItemsMovedSubject.value.asObservable()),this._beforeItemsMoved},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"itemsMoved",{get:function(){return this._itemsMoved||(this._itemsMoved=this.itemsMovedSubject.value.asObservable()),this._itemsMoved},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"lengthChanging",{get:function(){var a=this;return this._lengthChanging||(this._lengthChanging=this.listChanging.select(function(b){return a.inner.length}).distinctUntilChanged()),this._lengthChanging},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"lengthChanged",{get:function(){var a=this;return this._lengthChanged||(this._lengthChanged=this.listChanged.select(function(b){return a.inner.length}).distinctUntilChanged()),this._lengthChanged},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"itemChanging",{get:function(){return this._itemChanging||(this._itemChanging=this.itemChangingSubject.value.asObservable()),this._itemChanging},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"itemChanged",{get:function(){return this._itemChanged||(this._itemChanged=this.itemChangedSubject.value.asObservable()),this._itemChanged},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"shouldReset",{get:function(){var a=this;return this.refcountSubscribers(this.listChanged.selectMany(function(a){return a?Rx.Observable["return"](null):Rx.Observable.empty()}),function(b){return a.resetSubCount+=b})},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"changeTrackingEnabled",{get:function(){return null!=this.propertyChangeWatchers},set:function(a){var b=this;null!=this.propertyChangeWatchers&&a||(null!=this.propertyChangeWatchers||a)&&(a?(this.propertyChangeWatchers={},this.inner.forEach(function(a){return b.addItemToPropertyTracking(a)})):(this.clearAllPropertyChangeWatchers(),this.propertyChangeWatchers=null))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isReadOnly",{get:function(){return!1},enumerable:!0,configurable:!0}),a.prototype.addRange=function(a){var b=this;null==a&&f.throwError("items");var c=this.isLengthAboveResetThreshold(a.length)?this.suppressChangeNotifications():Rx.Disposable.empty;f.using(c,function(){if(b.areChangeNotificationsEnabled()){var c=b.inner.length;b.beforeItemsAddedSubject.isValueCreated&&b.beforeItemsAddedSubject.value.onNext({items:a,from:c}),Array.prototype.push.apply(b.inner,a),b.itemsAddedSubject.isValueCreated&&b.itemsAddedSubject.value.onNext({items:a,from:c}),b.changeTrackingEnabled&&a.forEach(function(a){b.addItemToPropertyTracking(a)})}else Array.prototype.push.apply(b.inner,a),b.changeTrackingEnabled&&a.forEach(function(a){b.addItemToPropertyTracking(a)})})},a.prototype.insertRange=function(a,b){var c=this;null==b&&f.throwError("collection"),a>this.inner.length&&f.throwError("index");var d=this.isLengthAboveResetThreshold(b.length)?this.suppressChangeNotifications():Rx.Disposable.empty;f.using(d,function(){c.areChangeNotificationsEnabled()?(c.beforeItemsAddedSubject.isValueCreated&&c.beforeItemsAddedSubject.value.onNext({items:b,from:a}),Array.prototype.splice.apply(c.inner,[a,0].concat(b)),c.itemsAddedSubject.isValueCreated&&c.itemsAddedSubject.value.onNext({items:b,from:a}),c.changeTrackingEnabled&&b.forEach(function(a){c.addItemToPropertyTracking(a)})):(Array.prototype.splice.apply(c.inner,[a,0].concat(b)),c.changeTrackingEnabled&&b.forEach(function(a){c.addItemToPropertyTracking(a)}))})},a.prototype.removeAll=function(a){var b=this;null==a&&f.throwError("items");var c=Array.isArray(a)?a:this.inner.filter(a),d=this.isLengthAboveResetThreshold(c.length)?this.suppressChangeNotifications():Rx.Disposable.empty;return f.using(d,function(){c.forEach(function(a){return b.remove(a)})}),c},a.prototype.removeRange=function(a,b){var c=this,d=this.isLengthAboveResetThreshold(b)?this.suppressChangeNotifications():Rx.Disposable.empty;f.using(d,function(){var d=c.inner.slice(a,a+b);c.areChangeNotificationsEnabled()?(c.beforeItemsRemovedSubject.isValueCreated&&c.beforeItemsRemovedSubject.value.onNext({items:d,from:a}),c.inner.splice(a,b),c.changeTrackingEnabled&&d.forEach(function(a){c.removeItemFromPropertyTracking(a)}),c.itemsRemovedSubject.isValueCreated&&c.itemsRemovedSubject.value.onNext({items:d,from:a})):(c.inner.splice(a,b),c.changeTrackingEnabled&&d.forEach(function(a){c.removeItemFromPropertyTracking(a)}))})},a.prototype.toArray=function(){return this.inner},a.prototype.reset=function(a){var b=this;f.using(this.suppressChangeNotifications(),function(c){b.clear(),a&&b.addRange(a)})},a.prototype.add=function(a){this.insertItem(this.inner.length,a)},a.prototype.clear=function(){this.clearItems()},a.prototype.contains=function(a){return-1!==this.inner.indexOf(a)},a.prototype.remove=function(a){var b=this.inner.indexOf(a);return-1===b?!1:(this.removeItem(b),!0)},a.prototype.indexOf=function(a){return this.inner.indexOf(a)},a.prototype.insert=function(a,b){this.insertItem(a,b)},a.prototype.removeAt=function(a){this.removeItem(a)},a.prototype.move=function(a,b){this.moveItem(a,b)},a.prototype.project=function(){var a=f.args2Array(arguments),b=a.shift();if(null!=b&&f.isRxObservable(b))return new r(this,void 0,void 0,void 0,b,a.shift());var c=a.shift();if(null!=c&&f.isRxObservable(c))return new r(this,b,void 0,void 0,c,a.shift());var d=a.shift();return null!=d&&f.isRxObservable(d)?new r(this,b,c,void 0,d,a.shift()):new r(this,b,c,d,a.shift(),a.shift())},a.prototype.page=function(a,b,c){return new p.PagedObservableListProjection(this,a,b,c)},a.prototype.suppressChangeNotifications=function(){var a=this;return this.changeNotificationsSuppressed++,this.hasWhinedAboutNoResetSub||0!==this.resetSubCount||f.isInUnitTest()||(m.hint("suppressChangeNotifications was called (perhaps via addRange), yet you do not have a subscription to shouldReset. This probably isn't what you want, as itemsAdded and friends will appear to 'miss' items"),this.hasWhinedAboutNoResetSub=!0),Rx.Disposable.create(function(){a.changeNotificationsSuppressed--,0===a.changeNotificationsSuppressed&&(a.publishBeforeResetNotification(),a.publishResetNotification())})},a.prototype.get=function(a){return this.inner[a]},a.prototype.set=function(a,b){return this.areChangeNotificationsEnabled()?(this.beforeItemReplacedSubject.isValueCreated&&this.beforeItemReplacedSubject.value.onNext({from:a,items:[b]}),this.changeTrackingEnabled&&(this.removeItemFromPropertyTracking(this.inner[a]),this.addItemToPropertyTracking(b)),this.inner[a]=b,void(this.itemReplacedSubject.isValueCreated&&this.itemReplacedSubject.value.onNext({from:a,items:[b]}))):(this.changeTrackingEnabled&&(this.removeItemFromPropertyTracking(this.inner[a]),this.addItemToPropertyTracking(b)),void(this.inner[a]=b))},a.prototype.sort=function(a){this.publishBeforeResetNotification(),this.inner.sort(a),this.publishResetNotification()},a.prototype.forEach=function(a,b){this.inner.forEach(a,b)},a.prototype.map=function(a,b){return this.inner.map(a,b)},a.prototype.filter=function(a,b){return this.inner.filter(a,b)},a.prototype.some=function(a,b){return this.inner.some(a,b)},a.prototype.every=function(a,b){return this.inner.every(a,b)},a.prototype.setupRx=function(a,b,c){void 0===b&&(b=.3),void 0===c&&(c=null),c=c||n.injector.get(o.app).mainThreadScheduler,this.resetChangeThreshold=b,void 0===this.inner&&(this.inner=new Array),this.beforeItemsAddedSubject=new i["default"](function(){return new Rx.Subject}),this.itemsAddedSubject=new i["default"](function(){return new Rx.Subject}),this.beforeItemsRemovedSubject=new i["default"](function(){return new Rx.Subject}),this.itemsRemovedSubject=new i["default"](function(){return new Rx.Subject}),this.beforeItemReplacedSubject=new i["default"](function(){return new Rx.Subject}),this.itemReplacedSubject=new i["default"](function(){return new Rx.Subject}),this.resetSubject=new Rx.Subject,this.beforeResetSubject=new Rx.Subject,this.itemChangingSubject=new i["default"](function(){return j.createScheduledSubject(c)}),this.itemChangedSubject=new i["default"](function(){return j.createScheduledSubject(c)}),this.beforeItemsMovedSubject=new i["default"](function(){return new Rx.Subject}),this.itemsMovedSubject=new i["default"](function(){return new Rx.Subject}),this.listChanged=Rx.Observable.merge(this.itemsAdded.select(function(a){return!1}),this.itemsRemoved.select(function(a){return!1}),this.itemReplaced.select(function(a){return!1}),this.itemsMoved.select(function(a){return!1}),this.resetSubject.select(function(a){return!0})).publish().refCount(),this.listChanging=Rx.Observable.merge(this.beforeItemsAdded.select(function(a){return!1}),this.beforeItemsRemoved.select(function(a){return!1}),this.beforeItemReplaced.select(function(a){return!1}),this.beforeItemsMoved.select(function(a){return!1}),this.beforeResetSubject.select(function(a){return!0})).publish().refCount(),a&&Array.prototype.splice.apply(this.inner,[0,0].concat(a)),this.length=this.lengthChanged.toProperty(this.inner.length),this.disposables.add(this.length),this.isEmpty=this.lengthChanged.select(function(a){return 0===a}).toProperty(0===this.inner.length),this.disposables.add(this.isEmpty)},a.prototype.areChangeNotificationsEnabled=function(){return 0===this.changeNotificationsSuppressed},a.prototype.insertItem=function(a,b){return this.areChangeNotificationsEnabled()?(this.beforeItemsAddedSubject.isValueCreated&&this.beforeItemsAddedSubject.value.onNext({items:[b],from:a}),this.inner.splice(a,0,b),this.itemsAddedSubject.isValueCreated&&this.itemsAddedSubject.value.onNext({items:[b],from:a}),void(this.changeTrackingEnabled&&this.addItemToPropertyTracking(b))):(this.inner.splice(a,0,b),void(this.changeTrackingEnabled&&this.addItemToPropertyTracking(b)))},a.prototype.removeItem=function(a){var b=this.inner[a];return this.areChangeNotificationsEnabled()?(this.beforeItemsRemovedSubject.isValueCreated&&this.beforeItemsRemovedSubject.value.onNext({items:[b],from:a}),this.inner.splice(a,1),this.itemsRemovedSubject.isValueCreated&&this.itemsRemovedSubject.value.onNext({items:[b],from:a}),void(this.changeTrackingEnabled&&this.removeItemFromPropertyTracking(b))):(this.inner.splice(a,1),void(this.changeTrackingEnabled&&this.removeItemFromPropertyTracking(b)))},a.prototype.moveItem=function(a,b){var c=this.inner[a];if(!this.areChangeNotificationsEnabled())return this.inner.splice(a,1),void this.inner.splice(b,0,c);var d={items:[c],from:a,to:b};this.beforeItemsMovedSubject.isValueCreated&&this.beforeItemsMovedSubject.value.onNext(d),this.inner.splice(a,1),this.inner.splice(b,0,c),this.itemsMovedSubject.isValueCreated&&this.itemsMovedSubject.value.onNext(d)},a.prototype.clearItems=function(){return this.areChangeNotificationsEnabled()?(this.publishBeforeResetNotification(),this.inner.length=0,this.publishResetNotification(),void(this.changeTrackingEnabled&&this.clearAllPropertyChangeWatchers())):(this.inner.length=0,void(this.changeTrackingEnabled&&this.clearAllPropertyChangeWatchers()))},a.prototype.addItemToPropertyTracking=function(a){var b=this.propertyChangeWatchers[g.getOid(a)],c=this;if(b)return void b.addRef();var d=f.observeObject(a,this.app.defaultExceptionHandler,!0).select(function(b){return new k.PropertyChangedEventArgs(a,b.propertyName)}),e=f.observeObject(a,this.app.defaultExceptionHandler,!1).select(function(b){return new k.PropertyChangedEventArgs(a,b.propertyName)}),h=new Rx.CompositeDisposable(d.where(function(a){return c.areChangeNotificationsEnabled()}).subscribe(function(a){return c.itemChangingSubject.value.onNext(a)}),e.where(function(a){return c.areChangeNotificationsEnabled()}).subscribe(function(a){return c.itemChangedSubject.value.onNext(a)}));this.propertyChangeWatchers[g.getOid(a)]=new l["default"](Rx.Disposable.create(function(){h.dispose(),delete c.propertyChangeWatchers[g.getOid(a)]}))},a.prototype.removeItemFromPropertyTracking=function(a){var b=this.propertyChangeWatchers[g.getOid(a)];b&&b.release()},a.prototype.clearAllPropertyChangeWatchers=function(){var a=this;null!=this.propertyChangeWatchers&&(Object.keys(this.propertyChangeWatchers).forEach(function(b){a.propertyChangeWatchers[b].release();
}),this.propertyChangeWatchers=null)},a.prototype.refcountSubscribers=function(a,b){return Rx.Observable.create(function(c){return b(1),new Rx.CompositeDisposable(a.subscribe(c),Rx.Disposable.create(function(){return b(-1)}))})},a.prototype.publishResetNotification=function(){this.resetSubject.onNext(!0)},a.prototype.publishBeforeResetNotification=function(){this.beforeResetSubject.onNext(!0)},a.prototype.isLengthAboveResetThreshold=function(a){return a/this.inner.length>this.resetChangeThreshold&&a>10},a}();b.ObservableList=q,b.list=d;var r=function(a){function b(b,c,d,e,f,g){a.call(this),this.indexToSourceIndexMap=[],this.sourceCopy=[],this.disp=new Rx.CompositeDisposable,this.source=b,this.selector=e||function(a){return a},this._filter=c,this.orderer=d,this.refreshTrigger=f,this.scheduler=g||Rx.Scheduler.immediate,this.addAllItemsFromSourceCollection(),this.wireUpChangeNotifications()}return e(b,a),Object.defineProperty(b.prototype,"isReadOnly",{get:function(){return!0},enumerable:!0,configurable:!0}),b.prototype.set=function(a,b){f.throwError(this.readonlyExceptionMessage)},b.prototype.addRange=function(a){f.throwError(this.readonlyExceptionMessage)},b.prototype.insertRange=function(a,b){f.throwError(this.readonlyExceptionMessage)},b.prototype.removeAll=function(a){return void f.throwError(this.readonlyExceptionMessage)},b.prototype.removeRange=function(a,b){f.throwError(this.readonlyExceptionMessage)},b.prototype.add=function(a){f.throwError(this.readonlyExceptionMessage)},b.prototype.clear=function(){f.throwError(this.readonlyExceptionMessage)},b.prototype.remove=function(a){return void f.throwError(this.readonlyExceptionMessage)},b.prototype.insert=function(a,b){f.throwError(this.readonlyExceptionMessage)},b.prototype.removeAt=function(a){f.throwError(this.readonlyExceptionMessage)},b.prototype.move=function(a,b){f.throwError(this.readonlyExceptionMessage)},b.prototype.sort=function(a){f.throwError(this.readonlyExceptionMessage)},b.prototype.reset=function(){var b=this;f.using(a.prototype.suppressChangeNotifications.call(this),function(){a.prototype.clear.call(b),b.indexToSourceIndexMap=[],b.sourceCopy=[],b.addAllItemsFromSourceCollection()})},b.prototype.dispose=function(){this.disp.dispose(),a.prototype.dispose.call(this)},b.prototype.referenceEquals=function(a,b){return g.getOid(a)===g.getOid(b)},b.prototype.refresh=function(){for(var a=this.sourceCopy.length,b=this.sourceCopy.map(function(a){return g.getOid(a)}),c=0;a>c;c++)this.onItemChanged(this.sourceCopy[c],b)},b.prototype.wireUpChangeNotifications=function(){var a=this;this.disp.add(this.source.itemsAdded.observeOn(this.scheduler).subscribe(function(b){a.onItemsAdded(b)})),this.disp.add(this.source.itemsRemoved.observeOn(this.scheduler).subscribe(function(b){a.onItemsRemoved(b)})),this.disp.add(this.source.itemsMoved.observeOn(this.scheduler).subscribe(function(b){a.onItemsMoved(b)})),this.disp.add(this.source.itemReplaced.observeOn(this.scheduler).subscribe(function(b){a.onItemsReplaced(b)})),this.disp.add(this.source.shouldReset.observeOn(this.scheduler).subscribe(function(b){a.reset()})),this.disp.add(this.source.itemChanged.select(function(a){return a.sender}).observeOn(this.scheduler).subscribe(function(b){return a.onItemChanged(b)})),null!=this.refreshTrigger&&this.disp.add(this.refreshTrigger.observeOn(this.scheduler).subscribe(function(b){return a.refresh()}))},b.prototype.onItemsAdded=function(a){this.shiftIndicesAtOrOverThreshold(a.from,a.items.length);for(var b=0;b<a.items.length;b++){var c=a.items[b];if(this.sourceCopy.splice(a.from+b,0,c),!this._filter||this._filter(c)){var d=this.selector(c);this.insertAndMap(a.from+b,d)}}},b.prototype.onItemsRemoved=function(a){this.sourceCopy.splice(a.from,a.items.length);for(var b=0;b<a.items.length;b++){var c=this.getIndexFromSourceIndex(a.from+b);-1!==c&&this.removeAtInternal(c)}var d=a.items.length;this.shiftIndicesAtOrOverThreshold(a.from+d,-d)},b.prototype.onItemsMoved=function(c){if(c.items.length>1&&f.throwError("Derived collections doesn't support multi-item moves"),c.from!==c.to){var d=c.from,e=c.to;this.sourceCopy.splice(d,1),this.sourceCopy.splice(e,0,c.items[0]);var g=this.getIndexFromSourceIndex(d);if(this.moveSourceIndexInMap(d,e),-1!==g)if(null==this.orderer){var h=b.newPositionForExistingItem2(this.indexToSourceIndexMap,e,g);h!==g?(this.indexToSourceIndexMap.splice(g,1),this.indexToSourceIndexMap.splice(h,0,e),a.prototype.move.call(this,g,h)):this.indexToSourceIndexMap[g]=e}else this.indexToSourceIndexMap[g]=e}},b.prototype.onItemsReplaced=function(a){for(var b=this.isLengthAboveResetThreshold(a.items.length)?this.sourceCopy.map(function(a){return g.getOid(a)}):null,c=0;c<a.items.length;c++){var d=a.items[c];this.sourceCopy[a.from+c]=d,b&&(b[a.from+c]=g.getOid(d)),this.onItemChanged(d,b)}},b.prototype.onItemChanged=function(b,c){for(var d=this.indexOfAll(this.sourceCopy,b,c),e=!this._filter||this._filter(b),f=d.length,g=0;f>g;g++){var h=d[g],i=this.getIndexFromSourceIndex(h),j=i>=0;if(j&&!e)this.removeAtInternal(i);else if(!j&&e)this.insertAndMap(h,this.selector(b));else if(j&&e){var k=this.selector(b);if(null==this.orderer)this.referenceEquals(k,this.get(i))||a.prototype.set.call(this,i,k);else if(this.canItemStayAtPosition(k,i))this.referenceEquals(k,this.get(i))||a.prototype.set.call(this,i,k);else if(this.referenceEquals(k,this.get(i))){var l=this.newPositionForExistingItem(h,i,k);this.indexToSourceIndexMap.splice(i,1),this.indexToSourceIndexMap.splice(l,0,h),a.prototype.move.call(this,i,l)}else this.removeAtInternal(i),this.insertAndMap(h,k)}}},b.prototype.canItemStayAtPosition=function(a,b){var c=b>0;if(c){var d=this.orderer(a,this.get(b-1))>=0;if(!d)return!1}var e=b<this.length()-1;if(e){var f=this.orderer(a,this.get(b+1))<=0;if(!f)return!1}return!0},b.prototype.getIndexFromSourceIndex=function(a){return this.indexToSourceIndexMap.indexOf(a)},b.prototype.indexOfAll=function(a,b,c){var d=[],e=0,f=a.length;if(c)for(var h=g.getOid(b),i=0;f>i;i++){var j=c[i];h===j&&d.push(e),e++}else for(var i=0;f>i;i++){var k=a[i];this.referenceEquals(k,b)&&d.push(e),e++}return d},b.prototype.moveSourceIndexInMap=function(a,b){b>a?this.shiftSourceIndicesInRange(a+1,b+1,-1):this.shiftSourceIndicesInRange(b,a,1)},b.prototype.shiftIndicesAtOrOverThreshold=function(a,b){for(var c=0;c<this.indexToSourceIndexMap.length;c++)this.indexToSourceIndexMap[c]>=a&&(this.indexToSourceIndexMap[c]+=b)},b.prototype.shiftSourceIndicesInRange=function(a,b,c){for(var d=0;d<this.indexToSourceIndexMap.length;d++){var e=this.indexToSourceIndexMap[d];e>=a&&b>e&&(this.indexToSourceIndexMap[d]+=c)}},b.prototype.addAllItemsFromSourceCollection=function(){for(var a=0,b=this.source.length(),c=0;b>c;c++){var d=this.source.get(c);if(this.sourceCopy.push(d),!this._filter||this._filter(d)){var e=this.selector(d);this.insertAndMap(a,e)}a++}},b.prototype.insertAndMap=function(b,c){var d=this.positionForNewItem(b,c);this.indexToSourceIndexMap.splice(d,0,b),a.prototype.insert.call(this,d,c)},b.prototype.removeAtInternal=function(b){this.indexToSourceIndexMap.splice(b,1),a.prototype.removeAt.call(this,b)},b.prototype.positionForNewItem=function(a,c){return null==this.orderer?b.positionForNewItemArray(this.indexToSourceIndexMap,a,b.defaultOrderer):b.positionForNewItemArray2(this.inner,0,this.inner.length,c,this.orderer)},b.positionForNewItemArray=function(a,c,d){return b.positionForNewItemArray2(a,0,a.length,c,d)},b.positionForNewItemArray2=function(a,b,c,d,e){if(0===c)return b;if(1===c)return e(a[b],d)>=0?b:b+1;if(e(a[b],d)>=1)return b;for(var f,g=b,h=b+c-1;h>=g;){var i=Math.floor(g+(h-g)/2);if(f=e(a[i],d),0===f)return i;0>f?g=i+1:h=i-1}return g},b.prototype.newPositionForExistingItem=function(a,c,d){return null==this.orderer?b.newPositionForExistingItem2(this.indexToSourceIndexMap,a,c):b.newPositionForExistingItem2(this.inner,d,c,this.orderer)},b.newPositionForExistingItem2=function(a,c,d,e){if(1===a.length)return 0;var f=d-1,g=d+1,h=a[f>=0?f:g];null==e&&(e=b.defaultOrderer);var i=e(c,h),j=0,k=a.length;if(0===i)return d;if(i>0?j=g:k=f,j===a.length||0>k)return d;var l=b.positionForNewItemArray2(a,j,k-j,c,e);return l>=d?l-1:l},b.defaultOrderer=function(a,b){var c;return c=null==a&&null==b?0:null==a?-1:null==b?1:a-b},b}(q)},function(a,b){"use strict";var c=function(){function a(a){this.createValue=a}return Object.defineProperty(a.prototype,"value",{get:function(){return this.isValueCreated||(this.createdValue=this.createValue(),this.isValueCreated=!0),this.createdValue},enumerable:!0,configurable:!0}),a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c},function(a,b,c){"use strict";function d(a,b,c){var d=new f(a,b,c),g=e.extend(d,new Rx.Subject,!0);return g}var e=c(3),f=function(){function a(a,b,c){this._observerRefCount=0,this._defaultObserverSub=Rx.Disposable.empty,this._scheduler=a,this._defaultObserver=b,this._subject=c||new Rx.Subject,null!=b&&(this._defaultObserverSub=this._subject.observeOn(this._scheduler).subscribe(this._defaultObserver))}return a.prototype.dispose=function(){e.isDisposable(this._subject)&&this._subject.dispose()},a.prototype.onCompleted=function(){this._subject.onCompleted()},a.prototype.onError=function(a){this._subject.onError(a)},a.prototype.onNext=function(a){this._subject.onNext(a)},a.prototype.subscribe=function(a){var b=this;return this._defaultObserverSub&&this._defaultObserverSub.dispose(),this._observerRefCount++,new Rx.CompositeDisposable(this._subject.observeOn(this._scheduler).subscribe(a),Rx.Disposable.create(function(){--b._observerRefCount<=0&&null!=b._defaultObserver&&(b._defaultObserverSub=b._subject.observeOn(b._scheduler).subscribe(b._defaultObserver))}))},a}();b.createScheduledSubject=d},function(a,b){"use strict";var c=function(){function a(a,b){void 0===b&&(b=1),this.inner=a,this.refCount=b}return a.prototype.addRef=function(){this.refCount++},a.prototype.release=function(){return 0===--this.refCount&&(this.inner.dispose(),this.inner=null),this.refCount},a.prototype.dispose=function(){this.release()},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c},function(a,b,c){"use strict";var d=c(3),e=c(5),f=c(19),g=c(20),h=c(8),i=function(){function a(a,b,c,e){this.disp=new Rx.CompositeDisposable,this.changeNotificationsSuppressed=0,this.resetSubject=new Rx.Subject,this.beforeResetSubject=new Rx.Subject,this.updateLengthTrigger=new Rx.Subject,this.source=a,this.scheduler=e||(d.isRxScheduler(c)?c:Rx.Scheduler.immediate),this.pageSize=h.property(b),this.currentPage=h.property(c||0);var i=Rx.Observable.merge(this.updateLengthTrigger,a.lengthChanged).startWith(!0).observeOn(Rx.Scheduler.immediate);this.pageCount=d.whenAny(this.pageSize,i,function(b,c){return Math.ceil(a.length()/b)}).distinctUntilChanged().toProperty(),this.disp.add(this.pageCount),this.length=d.whenAny(this.currentPage,this.pageSize,i,function(b,c,d){return Math.max(Math.min(a.length()-c*b,c),0)}).distinctUntilChanged().toProperty(),this.disp.add(this.length),this.isEmpty=this.lengthChanged.select(function(a){return 0===a}).toProperty(0===this.length()),this.disp.add(this.isEmpty),this.isEmptyChanged=d.whenAny(this.length,function(a){return 0==a}).distinctUntilChanged(),this.beforeItemsAddedSubject=new f["default"](function(){return new Rx.Subject}),this.itemsAddedSubject=new f["default"](function(){return new Rx.Subject}),this.beforeItemsRemovedSubject=new f["default"](function(){return new Rx.Subject}),this.itemsRemovedSubject=new f["default"](function(){return new Rx.Subject}),this.beforeItemReplacedSubject=new f["default"](function(){return new Rx.Subject}),this.itemReplacedSubject=new f["default"](function(){return new Rx.Subject}),this.itemChangingSubject=new f["default"](function(){return g.createScheduledSubject(e)}),this.itemChangedSubject=new f["default"](function(){return g.createScheduledSubject(e)}),this.beforeItemsMovedSubject=new f["default"](function(){return new Rx.Subject}),this.itemsMovedSubject=new f["default"](function(){return new Rx.Subject}),this.shouldReset=this.resetSubject.asObservable(),this.listChanged=Rx.Observable.merge(this.itemsAdded.select(function(a){return!1}),this.itemsRemoved.select(function(a){return!1}),this.itemReplaced.select(function(a){return!1}),this.itemsMoved.select(function(a){return!1}),this.resetSubject.select(function(a){return!0})).publish().refCount(),this.listChanging=Rx.Observable.merge(this.beforeItemsAdded.select(function(a){return!1}),this.beforeItemsRemoved.select(function(a){return!1}),this.beforeItemReplaced.select(function(a){return!1}),this.beforeItemsMoved.select(function(a){return!1}),this.beforeResetSubject.select(function(a){return!0})).publish().refCount(),this.wireUpChangeNotifications()}return a.prototype.queryInterface=function(a){return a===e["default"].IObservableList||a===e["default"].IDisposable},a.prototype.get=function(a){return a=this.pageSize()*this.currentPage()+a,this.source.get(a)},Object.defineProperty(a.prototype,"isReadOnly",{get:function(){return!0},enumerable:!0,configurable:!0}),a.prototype.indexOf=function(a){return this.toArray().indexOf(a)},a.prototype.contains=function(a){return-1!==this.indexOf(a)},a.prototype.toArray=function(){var a=this.pageSize()*this.currentPage();return this.source.toArray().slice(a,a+this.length())},a.prototype.forEach=function(a,b){this.toArray().forEach(a,b)},a.prototype.map=function(a,b){return this.toArray().map(a,b)},a.prototype.filter=function(a,b){return this.toArray().filter(a,b)},a.prototype.some=function(a,b){return this.toArray().some(a,b)},a.prototype.every=function(a,b){return this.toArray().every(a,b)},a.prototype.suppressChangeNotifications=function(){var a=this;return this.changeNotificationsSuppressed++,Rx.Disposable.create(function(){a.changeNotificationsSuppressed--,0===a.changeNotificationsSuppressed&&(a.publishBeforeResetNotification(),a.publishResetNotification())})},a.prototype.dispose=function(){this.disp.dispose()},Object.defineProperty(a.prototype,"itemsAdded",{get:function(){return this._itemsAdded||(this._itemsAdded=this.itemsAddedSubject.value.asObservable()),this._itemsAdded},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"beforeItemsAdded",{get:function(){return this._beforeItemsAdded||(this._beforeItemsAdded=this.beforeItemsAddedSubject.value.asObservable()),this._beforeItemsAdded},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"itemsRemoved",{get:function(){return this._itemsRemoved||(this._itemsRemoved=this.itemsRemovedSubject.value.asObservable()),this._itemsRemoved},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"beforeItemsRemoved",{get:function(){return this._beforeItemsRemoved||(this._beforeItemsRemoved=this.beforeItemsRemovedSubject.value.asObservable()),this._beforeItemsRemoved},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"itemReplaced",{get:function(){return this._itemReplaced||(this._itemReplaced=this.itemReplacedSubject.value.asObservable()),this._itemReplaced},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"beforeItemReplaced",{get:function(){return this._beforeItemReplaced||(this._beforeItemReplaced=this.beforeItemReplacedSubject.value.asObservable()),this._beforeItemReplaced},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"beforeItemsMoved",{get:function(){return this._beforeItemsMoved||(this._beforeItemsMoved=this.beforeItemsMovedSubject.value.asObservable()),this._beforeItemsMoved},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"itemsMoved",{get:function(){return this._itemsMoved||(this._itemsMoved=this.itemsMovedSubject.value.asObservable()),this._itemsMoved},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"lengthChanging",{get:function(){return this._lengthChanging||(this._lengthChanging=this.length.changing.distinctUntilChanged()),this._lengthChanging},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"lengthChanged",{get:function(){return this._lengthChanged||(this._lengthChanged=this.length.changed.distinctUntilChanged()),this._lengthChanged},enumerable:!0,configurable:!0}),a.prototype.wireUpChangeNotifications=function(){var a=this;this.disp.add(this.source.itemsAdded.observeOn(this.scheduler).subscribe(function(b){a.updateLengthTrigger.onNext(!0),a.onItemsAdded(b)})),this.disp.add(this.source.itemsRemoved.observeOn(this.scheduler).subscribe(function(b){a.updateLengthTrigger.onNext(!0),a.onItemsRemoved(b)})),this.disp.add(this.source.itemsMoved.observeOn(this.scheduler).subscribe(function(b){a.onItemsMoved(b)})),this.disp.add(this.source.itemReplaced.observeOn(this.scheduler).subscribe(function(b){a.onItemsReplaced(b)})),this.disp.add(this.source.shouldReset.observeOn(this.scheduler).subscribe(function(b){a.updateLengthTrigger.onNext(!0),a.publishBeforeResetNotification(),a.publishResetNotification()})),this.disp.add(d.whenAny(this.pageSize,this.currentPage,function(a,b){return!0}).observeOn(this.scheduler).subscribe(function(b){a.publishBeforeResetNotification(),a.publishResetNotification()}))},a.prototype.getPageRange=function(){var a=this.currentPage()*this.pageSize(),b={from:a,to:a+this.length()};return b},a.prototype.publishResetNotification=function(){this.resetSubject.onNext(!0)},a.prototype.publishBeforeResetNotification=function(){this.beforeResetSubject.onNext(!0)},a.prototype.onItemsAdded=function(a){var b=this.getPageRange();if(!(a.from>b.to))if(a.from<b.from)this.publishBeforeResetNotification(),this.publishResetNotification();else{var c=a.from-b.from,d=Math.min(this.length()-c,a.items.length),e=a.items.length!==d?a.items.slice(0,d):a.items,f={from:c,items:e};this.beforeItemsAddedSubject.isValueCreated&&this.beforeItemsAddedSubject.value.onNext(f),this.itemsAddedSubject.isValueCreated&&this.itemsAddedSubject.value.onNext(f)}},a.prototype.onItemsRemoved=function(a){var b=this.getPageRange();if(!(a.from>b.to))if(a.from<b.from)this.publishBeforeResetNotification(),this.publishResetNotification();else{var c=a.from-b.from,d=Math.min(this.length()-c,a.items.length),e=a.items.length!==d?a.items.slice(0,d):a.items,f={from:c,items:e};this.beforeItemsRemovedSubject.isValueCreated&&this.beforeItemsRemovedSubject.value.onNext(f),this.itemsRemovedSubject.isValueCreated&&this.itemsRemovedSubject.value.onNext(f)}},a.prototype.onItemsMoved=function(a){var b,c=this.getPageRange(),d=0,e=0;if(!(a.from>=c.to&&a.to>=c.to||a.from<c.from&&a.to<c.from)){if(a.from>=c.from&&a.from<c.to){if(a.to>=c.from&&a.to<c.to)return d=a.from-c.from,e=a.to-c.from,b={from:d,to:e,items:a.items},this.beforeItemsMovedSubject.isValueCreated&&this.beforeItemsMovedSubject.value.onNext(b),void(this.itemsMovedSubject.isValueCreated&&this.itemsMovedSubject.value.onNext(b));if(a.to>=c.to){var f=this.length()-1;return d=a.from-c.from,void(d!==f?(b={from:d,items:a.items},this.beforeItemsRemovedSubject.isValueCreated&&this.beforeItemsRemovedSubject.value.onNext(b),this.itemsRemovedSubject.isValueCreated&&this.itemsRemovedSubject.value.onNext(b),d=this.length()-1,b={from:d,items:[this.get(d)]},this.beforeItemsAddedSubject.isValueCreated&&this.beforeItemsAddedSubject.value.onNext(b),this.itemsAddedSubject.isValueCreated&&this.itemsAddedSubject.value.onNext(b)):(d=this.length()-1,b={from:d,items:[this.get(d)]},this.beforeItemReplacedSubject.isValueCreated&&this.beforeItemReplacedSubject.value.onNext(b),this.itemReplacedSubject.isValueCreated&&this.itemReplacedSubject.value.onNext(b)))}}this.publishBeforeResetNotification(),this.publishResetNotification()}},a.prototype.onItemsReplaced=function(a){var b=this.getPageRange();if(!(a.from>b.to||a.from<b.from)){var c=a.from-b.from,d={from:c,items:a.items};this.beforeItemReplacedSubject.isValueCreated&&this.beforeItemReplacedSubject.value.onNext(d),this.itemReplacedSubject.isValueCreated&&this.itemReplacedSubject.value.onNext(d)}},a}();b.PagedObservableListProjection=i},function(a,b){"use strict";function c(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a}function d(a,b){for(var d,e,k,l,m,n=b.createDocumentFragment(),o=[],p=0,q=a.length;q>p;p++)if(d=a[p],d||0===d)if("object"==typeof d)c(o,d.nodeType?[d]:d);else if(h.test(d)){for(e=e||n.appendChild(b.createElement("div")),k=(g.exec(d)||["",""])[1].toLowerCase(),l=j[k]||j._default,e.innerHTML=l[1]+d.replace(f,"<$1></$2>")+l[2],m=l[0];m--;)e=e.lastChild;c(o,e.childNodes),e=n.firstChild,e.textContent=""}else o.push(b.createTextNode(d));for(n.textContent="",p=0;d=o[p++];)1===d.nodeType&&"script"===d.tagName.toLowerCase()&&i.test(d.type||"")||n.appendChild(d);return n}var e=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,f=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,g=/<([\w:-]+)/,h=/<|&#?\w+;/,i=/^$|\/(?:java|ecma)script/i,j={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table>","</table>"],td:[3,"<table>","</table>"],_default:[0,"",""]};j.optgroup=j.option,j.tbody=j.tfoot=j.colgroup=j.caption=j.thead,j.th=j.td;var k=function(){if(document){var a=document.implementation.createHTMLDocument("");return a.body?(a.body.innerHTML="<form></form><form></form>",2===a.body.childNodes.length):!1}return!1}(),l=function(){function a(){}return a.prototype.parse=function(a){if(document){var b=k?document.implementation.createHTMLDocument(""):document,f=e.exec(a);if(f)return[b.createElement(f[1])];f=d([a],b);var g=c([],f.childNodes);return g}return[]},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=l},function(a,b,c){"use strict";var d=c(3),e=c(25),f=function(){function a(a,b){this.priority=0,this.domManager=a,this.app=b}return a.prototype.applyBinding=function(a,b,c,f,g){function h(){m&&(m.dispose(),m=null)}var i=this;1!==a.nodeType&&d.throwError("command-binding only operates on elements!"),null==b&&d.throwError("invalid binding-options!");var j,k,l,m,n=this.domManager.compileBindingOptions(b,g),o=a,p="a"===o.tagName.toLowerCase();if("function"==typeof n)j=n,k=this.domManager.expressionToObservable(j,c);else{var q=n;j=q.command,k=this.domManager.expressionToObservable(j,c),q.parameter&&(j=q.parameter,l=this.domManager.expressionToObservable(j,c))}null==l&&(l=Rx.Observable["return"](void 0)),f.cleanup.add(Rx.Observable.combineLatest(k,l,function(a,b){return{cmd:a,param:b}}).subscribe(function(a){try{h(),m=new Rx.CompositeDisposable,null!=a.cmd&&(e.isCommand(a.cmd)||d.throwError("Command-Binding only supports binding to a command!"),d.elementCanBeDisabled(o)&&(o.disabled=!a.cmd.canExecute(a.param),m.add(a.cmd.canExecuteObservable.subscribe(function(a){o.disabled=!a}))),m.add(Rx.Observable.fromEvent(o,"click").subscribe(function(b){a.cmd.canExecute(a.param)&&a.cmd.execute(a.param),p&&b.preventDefault()})))}catch(b){i.app.defaultExceptionHandler.onNext(b)}})),f.cleanup.add(Rx.Disposable.create(function(){a=null,b=null,c=null,f=null,o=null,h()}))},a.prototype.configure=function(a){},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f},function(a,b,c){"use strict";function d(){var a,b,c,d,f=h.args2Array(arguments);return h.isFunction(f[0])?(b=f.shift(),a=h.isRxObservable(f[0])?f.shift():Rx.Observable["return"](!0),c=h.isRxScheduler(f[0])?f.shift():void 0,d=f.shift(),null!=d&&(b=b.bind(d)),e(a,function(a){return Rx.Observable.create(function(c){try{b(a),c.onNext(null),c.onCompleted()}catch(d){c.onError(d)}return Rx.Disposable.empty})},c)):(a=f.shift()||Rx.Observable["return"](!0),c=h.isRxScheduler(f[0])?f.shift():void 0,new k(a,function(a){return Rx.Observable["return"](a)},c))}function e(){var a,b,c,d,e=h.args2Array(arguments);return h.isFunction(e[0])?(b=e.shift(),c=h.isRxScheduler(e[0])?e.shift():void 0,d=e.shift(),null!=d&&(b=b.bind(d)),new k(Rx.Observable["return"](!0),b,c)):(a=e.shift(),b=e.shift(),c=h.isRxScheduler(e[0])?e.shift():void 0,new k(a,b,c))}function f(a){return null==a?!1:a instanceof k||h.queryInterface(a,g["default"].ICommand)}var g=c(5),h=c(3),i=c(2),j=c(6),k=function(){function a(a,b,c){var d=this;this.resultsSubject=new Rx.Subject,this.isExecutingSubject=new Rx.Subject,this.inflightCount=0,this.canExecuteLatest=!1,this.scheduler=c||i.injector.get(j.app).mainThreadScheduler,this.func=b;var e=a.combineLatest(this.isExecutingSubject.startWith(!1),function(a,b){return a&&!b})["catch"](function(a){return d.exceptionsSubject.onNext(a),Rx.Observable["return"](!1)})["do"](function(a){d.canExecuteLatest=a}).startWith(this.canExecuteLatest).distinctUntilChanged().publish();this.canExecuteDisp=e.connect(),this.canExecuteObservable=e,this.exceptionsSubject=new Rx.Subject,this.thrownExceptions=this.exceptionsSubject.asObservable(),this.exceptionsSubject.observeOn(this.scheduler).subscribe(i.injector.get(j.app).defaultExceptionHandler)}return a.prototype.queryInterface=function(a){return a===g["default"].ICommand||a===g["default"].IDisposable},a.prototype.dispose=function(){var a=this.canExecuteDisp;null!=a&&a.dispose()},Object.defineProperty(a.prototype,"isExecuting",{get:function(){return this.isExecutingSubject.startWith(this.inflightCount>0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"results",{get:function(){return this.resultsSubject.asObservable()},enumerable:!0,configurable:!0}),a.prototype.canExecute=function(a){return this.canExecuteLatest},a.prototype.execute=function(a){this.executeAsync(a)["catch"](Rx.Observable.empty()).subscribe()},a.prototype.executeAsync=function(a){var b=this,c=this.canExecute(a)?Rx.Observable.create(function(c){1===++b.inflightCount&&b.isExecutingSubject.onNext(!0);var d=new Rx.SerialDisposable;d.setDisposable(Rx.Disposable.create(function(){0===--b.inflightCount&&b.isExecutingSubject.onNext(!1)}));var e=b.func(a).observeOn(b.scheduler)["do"](function(a){},function(a){return d.setDisposable(Rx.Disposable.empty)},function(){return d.setDisposable(Rx.Disposable.empty)})["do"](function(a){return b.resultsSubject.onNext(a)},function(a){return b.exceptionsSubject.onNext(a)}).subscribe(c);return new Rx.CompositeDisposable(e,d)}):Rx.Observable["throw"](new Error("canExecute currently forbids execution"));return c.publish().refCount()},a}();b.Command=k;var l;!function(a){a.commandConstructor=k}(l=b.internal||(b.internal={})),b.command=d,b.asyncCommand=e,b.isCommand=f},function(a,b,c){"use strict";var d=c(3),e=c(9),f=function(){function a(a,b){this.priority=100,this.controlsDescendants=!0,this.domManager=a,this.app=b}return a.prototype.applyBinding=function(a,b,c,f,g){function h(){j&&(j.dispose(),j=null)}var i=this;1!==a.nodeType&&d.throwError("module-binding only operates on elements!"),null==b&&d.throwError("invalid binding-options!");var j,k=a,l=this,m=this.domManager.compileBindingOptions(b,g),n=this.domManager.expressionToObservable(m,c),o=!0,p=new Array;f.cleanup.add(n.subscribe(function(a){try{h(),j=new Rx.CompositeDisposable;var b,m=d.unwrapProperty(a),n=void 0;if(m&&(m=m.trim(),b=m.split(" ").filter(function(a){return a})),b.length>0){var q=b.map(function(a){return e.loadModule(a)});n=Rx.Observable.combineLatest(q,function(a){return d.args2Array(arguments)}).subscribe(function(a){try{var d=(g||i.app).name+"+"+b.join("+"),h=new e.Module(d);h.merge(g||i.app),a.forEach(function(a){return h.merge(a)}),l.applyValue(k,h,p,c,f,o),o=!1}catch(j){i.app.defaultExceptionHandler.onNext(j)}}),null!=n&&j.add(n)}}catch(r){i.app.defaultExceptionHandler.onNext(r)}})),f.cleanup.add(Rx.Disposable.create(function(){a=null,b=null,c=null,f=null,n=null,l=null}))},a.prototype.configure=function(a){},a.prototype.applyValue=function(a,b,c,d,e,f){if(f)for(var g=0;g<a.childNodes.length;g++)c.push(a.childNodes[g].cloneNode(!0));for(e.module=b,this.domManager.cleanDescendants(a);a.firstChild;)a.removeChild(a.firstChild);for(var g=0;g<c.length;g++){var h=c[g].cloneNode(!0);a.appendChild(h)}this.domManager.applyBindingsToDescendants(d,a)},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(3),f=function(){function a(a,b){this.priority=50,this.controlsDescendants=!0,this.inverse=!1,this.domManager=a,this.app=b}return a.prototype.applyBinding=function(a,b,c,d,f){function g(){j&&(j.dispose(),j=null)}var h=this;1!==a.nodeType&&e.throwError("if-binding only operates on elements!"),null==b&&e.throwError("invalid binding-options!");var i,j,k=this.domManager.compileBindingOptions(b,f),l=a,m=this,n=!0,o={};if("object"==typeof k){var p=k;i=p.condition,p.enter&&(o.enter=this.domManager.evaluateExpression(p.enter,c),"string"==typeof o.enter&&(o.enter=f.animation(o.enter))),p.leave&&(o.leave=this.domManager.evaluateExpression(p.leave,c),"string"==typeof o.leave&&(o.leave=f.animation(o.leave)))}else i=k;var q=this.domManager.expressionToObservable(i,c),r=new Array;d.cleanup.add(q.subscribe(function(a){try{g(),j=new Rx.CompositeDisposable,j.add(m.applyValue(l,e.unwrapProperty(a),r,c,o,n)),n=!1}catch(b){h.app.defaultExceptionHandler.onNext(b)}})),d.cleanup.add(Rx.Disposable.create(function(){a=null,b=null,c=null,d=null,q=null,l=null,m=null,r=null}))},a.prototype.configure=function(a){},a.prototype.applyValue=function(a,b,c,d,f,g){function h(){o.forEach(function(b){l.domManager.cleanNode(b),a.removeChild(b)})}var i=this,j=f.leave,k=f.enter,l=this,m=void 0;if(g){for(var n=0;n<a.childNodes.length;n++)c.push(a.childNodes[n].cloneNode(!0));for(;a.firstChild;)a.removeChild(a.firstChild)}var o=e.nodeChildrenToArray(a);if(b=this.inverse?!b:b,o.length>0&&(j?(j.prepare(o),m=j.run(o).continueWith(function(){return j.complete(o)}).continueWith(h)):h()),b){var p=c.map(function(a){return a.cloneNode(!0)});if(m)m=m.continueWith(function(){k&&k.prepare(p);for(var b=0;b<c.length;b++)a.appendChild(p[b]);i.domManager.applyBindingsToDescendants(d,a)}),k&&(m=k.run(p).continueWith(function(){return k.complete(p)}));else{k&&k.prepare(p);for(var n=0;n<c.length;n++)a.appendChild(p[n]);this.domManager.applyBindingsToDescendants(d,a),k&&(m=k.run(p).continueWith(function(){return k.complete(p)}))}}return m?m.subscribe()||Rx.Disposable.empty:Rx.Disposable.empty},a}();b.IfBinding=f;var g=function(a){function b(b,c){a.call(this,b,c),this.inverse=!0}return d(b,a),b}(f);b.NotIfBinding=g},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(3),f=c(29),g=function(a){function b(b,c){a.call(this,b,c,!0)}return d(b,a),b.prototype.applyValue=function(a,b,c){var d;if(""!==c)d=c.split(/\s+/).map(function(a){return a.trim()}).filter(function(a){return a}),d.length&&e.toggleCssClass.apply(null,[a,!!b].concat(d));else{var f=this.domManager.getNodeState(a);null!=f.cssBindingPreviousDynamicClasses&&(e.toggleCssClass.apply(null,[a,!1].concat(f.cssBindingPreviousDynamicClasses)),f.cssBindingPreviousDynamicClasses=null),b&&(d=b.split(/\s+/).map(function(a){return a.trim()}).filter(function(a){return a}),d.length&&(e.toggleCssClass.apply(null,[a,!0].concat(d)),f.cssBindingPreviousDynamicClasses=d))}},b}(f.MultiOneWayBindingBase);b.CssBinding=g;var h=function(a){function b(b,c){a.call(this,b,c),this.priority=5}return d(b,a),b.prototype.applyValue=function(a,b,c){var d=b===!1||null===b||void 0===b;d?a.removeAttribute(c):a.setAttribute(c,b.toString())},b}(f.MultiOneWayBindingBase);b.AttrBinding=h;var i=function(a){function b(b,c){a.call(this,b,c)}return d(b,a),b.prototype.applyValue=function(a,b,c){(null===b||void 0===b||b===!1)&&(b=""),a.style[c]=b},b}(f.MultiOneWayBindingBase);b.StyleBinding=i},function(a,b,c){"use strict";var d=c(3),e=function(){function a(a,b){this.priority=0,this.domManager=a,this.app=b}return a.prototype.applyBinding=function(a,b,c,e,f){var g=this;1!==a.nodeType&&d.throwError("binding only operates on elements!"),null==b&&d.throwError("invalid binding-options!");
var h=a,i=this,j=this.domManager.compileBindingOptions(b,f),k=this.domManager.expressionToObservable(j,c);e.cleanup.add(k.subscribe(function(a){try{i.applyValue(h,d.unwrapProperty(a))}catch(b){g.app.defaultExceptionHandler.onNext(b)}})),e.cleanup.add(Rx.Disposable.create(function(){a=null,b=null,c=null,e=null,h=null,k=null,i=null}))},a.prototype.configure=function(a){},a.prototype.applyValue=function(a,b){d.throwError("you need to override this method!")},a}();b.SingleOneWayBindingBase=e;var f=function(){function a(a,b,c){void 0===c&&(c=!1),this.priority=0,this.supportsDynamicValues=!1,this.domManager=a,this.app=b,this.supportsDynamicValues=c}return a.prototype.applyBinding=function(a,b,c,e,f){1!==a.nodeType&&d.throwError("binding only operates on elements!");var g=this.domManager.compileBindingOptions(b,f);(null==g||"object"!=typeof g&&!this.supportsDynamicValues)&&d.throwError("invalid binding-options!");var h,i,j,k=a,l=new Array,m=Object.keys(g);if("function"==typeof g)i=g,h=this.domManager.expressionToObservable(i,c),l.push(["",h]);else for(var n=0;n<m.length;n++){j=m[n];var o=g[j];i=o,h=this.domManager.expressionToObservable(i,c),l.push([j,h])}for(var n=0;n<l.length;n++)j=l[n][0],h=l[n][1],this.subscribe(k,h,j,e);e.cleanup.add(Rx.Disposable.create(function(){a=null,b=null,c=null,e=null,k=null,m=null,l=null}))},a.prototype.configure=function(a){},a.prototype.subscribe=function(a,b,c,e){var f=this;e.cleanup.add(b.subscribe(function(b){try{f.applyValue(a,d.unwrapProperty(b),c)}catch(e){f.app.defaultExceptionHandler.onNext(e)}}))},a.prototype.applyValue=function(a,b,c){d.throwError("you need to override this method!")},a}();b.MultiOneWayBindingBase=f},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(3),f=c(29),g=function(a){function b(b,c){a.call(this,b,c)}return d(b,a),b.prototype.applyValue=function(a,b){(null===b||void 0===b)&&(b=""),a.textContent=b},b}(f.SingleOneWayBindingBase);b.TextBinding=g;var h=function(a){function b(b,c){a.call(this,b,c),this.inverse=!1,this.inverse=!1,this.priority=10}return d(b,a),b.prototype.configure=function(a){var c=a;b.useCssClass=c.useCssClass,b.hiddenClass=c.hiddenClass},b.prototype.applyValue=function(a,c){c=this.inverse?!c:c,b.useCssClass?e.toggleCssClass(a,!c,b.hiddenClass):c?a.style.display="":a.style.display="none"},b}(f.SingleOneWayBindingBase);b.VisibleBinding=h;var i=function(a){function b(b,c){a.call(this,b,c),this.inverse=!0}return d(b,a),b}(h);b.HiddenBinding=i;var j=function(a){function b(b,c){a.call(this,b,c)}return d(b,a),b.prototype.applyValue=function(a,b){(null===b||void 0===b)&&(b=""),a.innerHTML=b},b}(f.SingleOneWayBindingBase);b.HtmlBinding=j;var k=function(a){function b(b,c){a.call(this,b,c),this.inverse=!1,this.inverse=!1}return d(b,a),b.prototype.applyValue=function(a,b){b=this.inverse?!b:b,e.elementCanBeDisabled(a)&&(a.disabled=b)},b}(f.SingleOneWayBindingBase);b.DisableBinding=k;var l=function(a){function b(b,c){a.call(this,b,c),this.inverse=!0}return d(b,a),b}(k);b.EnableBinding=l},function(a,b,c){"use strict";var d=c(3),e=c(32),f=c(21),g=c(2),h=c(17),i=function(){function a(a,b){this.priority=40,this.controlsDescendants=!0,this.domManager=a,this.app=b,a.registerDataContextExtension(function(b,c){var d=a.getNodeState(b);c.$index=d.index})}return a.prototype.applyBinding=function(a,b,c,e,f){var h=this;1!==a.nodeType&&d.throwError("forEach binding only operates on elements!"),null==b&&d.throwError("** invalid binding options!");var i,j,k,l=this.domManager.compileBindingOptions(b,f),m=a,n=this,o=!0,p=null,q={};if("object"==typeof l&&l.hasOwnProperty("data")){var r=l;j=r.data,r.itemEnter&&(q.itemEnter=this.domManager.evaluateExpression(r.itemEnter,c),"string"==typeof q.itemEnter&&(q.itemEnter=f.animation(q.itemEnter))),r.itemLeave&&(q.itemLeave=this.domManager.evaluateExpression(r.itemLeave,c),"string"==typeof q.itemLeave&&(q.itemLeave=f.animation(q.itemLeave))),r.hooks&&(i=this.domManager.evaluateExpression(r.hooks,c)),"string"==typeof i&&(i=g.injector.get(i)),r.debug&&r.debug.setProxyFunc&&(k=this.domManager.evaluateExpression(r.debug.setProxyFunc,c))}else j=l;var s=this.domManager.expressionToObservable(j,c);e.cleanup.add(Rx.Disposable.create(function(){p&&(p.dispose(),p=null)}));var t=new Array;e.cleanup.add(s.subscribe(function(a){try{p&&p.dispose(),p=new Rx.CompositeDisposable,n.applyValue(m,a,i,q,t,c,o,p,k),o=!1}catch(b){h.app.defaultExceptionHandler.onNext(b)}})),e.cleanup.add(Rx.Disposable.create(function(){a=null,b=null,c=null,e=null,s=null,m=null,n=null,t=null,i=null}))},a.prototype.configure=function(a){},a.prototype.createIndexPropertyForNode=function(a,b,c,d,e){return Rx.Observable.defer(function(){return Rx.Observable.create(function(c){return d.subscribe(function(d){var f=a.childNodes.indexOf(b);f/=e,c.onNext(f)})})}).toProperty(c)},a.prototype.appendAllRows=function(a,b,c,d,e,f,g,h){for(var i=b.length(),j=0;i>j;j++)this.appendRow(a,j,b.get(j),c,d,e,f,g,h)},a.prototype.appendRow=function(a,b,c,e,g,h,i,j,k){var l=d.cloneNodeArray(g),m=b,n=i.itemEnter,o={item:c};if(j&&(m=this.createIndexPropertyForNode(a,l[0],b,j,g.length),o.indexDisp=new f["default"](m,0)),o.index=m,null!=n&&n.prepare(l),a.appendChilds(l,o),h&&(h.afterRender&&h.afterRender(l,c),!k&&h.afterAdd&&h.afterAdd(l,c,b)),n)var p=n.run(l).continueWith(function(){return n.complete(l)}).subscribe(function(a){null!=p&&p.dispose()})},a.prototype.insertRow=function(a,b,c,e,g,h,i,j){var k=g.length,l=i.itemEnter,m=d.cloneNodeArray(g),n=this.createIndexPropertyForNode(a,m[0],b,j,g.length);if(null!=l&&l.prepare(m),a.insertChilds(b*k,m,{index:n,item:c,indexDisp:new f["default"](n,0)}),h&&(h.afterRender&&h.afterRender(m,c),h.afterAdd&&h.afterAdd(m,c,b)),l)var o=l.run(m).continueWith(function(){return l.complete(m)}).subscribe(function(a){null!=o&&o.dispose()})},a.prototype.removeRow=function(a,b,c,d,e,f){function g(){for(var a=0;h>a;a++)i.removeChild(j[a])}var h=d.length,i=a.targetNode,j=a.removeChilds(b*h,h,!0),k=f.itemLeave;if(e&&e.beforeRemove)e.beforeRemove(j,c,b);else if(null!=k){k.prepare(j);var l=k.run(j).continueWith(function(){return k.complete(j)}).continueWith(g).subscribe(function(a){null!=l&&l.dispose()})}else g()},a.prototype.moveRow=function(a,b,c,e,g,h,i,j){function k(){for(var a=0;n>a;a++)o.removeChild(p[a])}function l(){p=d.cloneNodeArray(g);var i=t.createIndexPropertyForNode(a,p[0],b,j,g.length);null!=r&&r.prepare(p),a.insertChilds(n*c,p,{index:i,item:e,indexDisp:new f["default"](i,0)}),h&&h.afterMove&&h.afterMove(p,e,b)}var m,n=g.length,o=a.targetNode,p=a.removeChilds(b*n,n,!0),q=i.itemLeave,r=i.itemEnter,s=[],t=this;h&&h.beforeMove&&h.beforeMove(p,e,b),q?(q.prepare(p),m=q.run(p).continueWith(function(){return q.complete(p)}).continueWith(k)):m=Rx.Observable.startDeferred(k),s.push(m),m=Rx.Observable.startDeferred(l),r&&(m=m.continueWith(r.run(p)).continueWith(function(){return r.complete(p)})),s.push(m),s.length>1?m=Rx.Observable.combineLatest(s,d.noop).take(1):1===s.length&&(m=s[0].take(1));var u=m.subscribe(function(a){null!=u&&u.dispose()})},a.prototype.rebindRow=function(a,b,c,d,e){for(var g=d.length,h=this.createIndexPropertyForNode(a,a.childNodes[b*g],b,e,d.length),i=new f["default"](h,0),j=0;j<d.length;j++){var k=a.childNodes[b*g+j];if(1===k.nodeType){this.domManager.cleanNode(k);var l=this.domManager.createNodeState(c);l.index=h,i.addRef(),l.cleanup.add(i),this.domManager.setNodeState(k,l),this.domManager.applyBindings(c,k)}}},a.prototype.observeList=function(a,b,c,d,e,f,g,h){var i,j=this;d.add(h),this.appendAllRows(a,e,b,c,f,g,h,!0),d.add(e.itemsAdded.subscribe(function(d){if(i=d.items.length,d.from===e.length())for(var k=0;i>k;k++)j.appendRow(a,k+d.from,d.items[k],b,c,f,g,h,!1);else for(var l=0;l<d.items.length;l++)j.insertRow(a,l+d.from,d.items[l],b,c,f,g,h);h.onNext(!0)})),d.add(e.itemsRemoved.subscribe(function(b){i=b.items.length;for(var d=0;i>d;d++)j.removeRow(a,d+b.from,b.items[d],c,f,g);h.onNext(!0)})),d.add(e.itemsMoved.subscribe(function(b){j.moveRow(a,b.from,b.to,b.items[0],c,f,g,h),h.onNext(!0)})),d.add(e.itemReplaced.subscribe(function(b){j.rebindRow(a,b.from,b.items[0],c,h),h.onNext(!0)})),d.add(e.shouldReset.subscribe(function(d){a.clear(),j.appendAllRows(a,e,b,c,f,g,h,!1),h.onNext(!0)}))},a.prototype.applyValue=function(a,b,c,f,g,i,j,k,l){function m(a,b){var c=b.item,d=b.index,e=b.indexDisp;if(1===a.nodeType){var f=s.domManager.getNodeState(a)||s.domManager.createNodeState();f.model=c,f.index=d,s.domManager.setNodeState(a,f),null!=r&&null!=e&&(e.addRef(),f.cleanup.add(e)),s.domManager.applyBindings(c,a)}}function n(a){1===a.nodeType&&s.domManager.cleanNode(a)}var o;if(j){o=a.childNodes.length;for(var p=0;o>p;p++)g.push(a.childNodes[p].cloneNode(!0))}for(;a.firstChild;)a.removeChild(a.firstChild);if(0!==g.length){var q,r,s=this;if(q=new e["default"](a,!1,m,n),l&&l(q),k.add(Rx.Disposable.create(function(){q=null})),Array.isArray(b)){var t=b;o=t.length;for(var u=0;o>u;u++)this.appendRow(q,u,t[u],i,g,c,f,void 0,!0)}else if(h.isList(b)){var v=b;r=new Rx.Subject,this.observeList(q,i,g,k,v,c,f,r)}else d.throwError("forEach-Binding: value must be either array or observable list")}},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=i},function(a,b){"use strict";var c=function(){function a(a,b,c,d){if(this.childNodes=[],this.targetNode=a,this.insertCB=c,this.removeCB=d,b)for(var e=0;e<a.childNodes.length;e++)this.childNodes.push(a.childNodes[e])}return a.prototype.appendChilds=function(a,b){var c=a.length;a.length>1?Array.prototype.push.apply(this.childNodes,a):this.childNodes.push(a[0]);for(var d=0;c>d;d++)this.targetNode.appendChild(a[d]);if(this.insertCB)for(var d=0;c>d;d++)this.insertCB(a[d],b)},a.prototype.insertChilds=function(a,b,c){if(a===this.childNodes.length)this.appendChilds(b,c);else{var d=this.childNodes[a],e=b.length;Array.prototype.splice.apply(this.childNodes,[a,0].concat(b));for(var f=0;e>f;f++)this.targetNode.insertBefore(b[f],d);if(this.insertCB)for(var f=0;e>f;f++)this.insertCB(b[f],c)}},a.prototype.removeChilds=function(a,b,c){var d;if(0===b)return[];var e=this.childNodes.slice(a,a+b);if(this.childNodes.splice(a,b),!c)for(var f=e.length,g=0;f>g;g++)d=e[g],this.removeCB&&this.removeCB(d),this.targetNode.removeChild(d);return e},a.prototype.clear=function(){for(var a,b=this.childNodes.length,c=0;b>c;c++)a=this.childNodes[c],this.removeCB&&this.removeCB(a),this.targetNode.removeChild(a);this.childNodes=[]},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c},function(a,b,c){"use strict";var d=c(3),e=c(25),f=function(){function a(a,b){this.priority=0,this.domManager=a,this.app=b}return a.prototype.applyBinding=function(a,b,c,e,f){var g=this;1!==a.nodeType&&d.throwError("event-binding only operates on elements!"),null==b&&d.throwError("invalid binding-options!");var h=a,i=this.domManager.getObjectLiteralTokens(b);i.forEach(function(a){g.wireEvent(h,a.value,a.key,c,e,f)}),e.cleanup.add(Rx.Disposable.create(function(){a=null,b=null,c=null,e=null,h=null}))},a.prototype.configure=function(a){},a.prototype.wireEvent=function(a,b,c,f,g,h){var i,j=this,k=this.domManager.compileBindingOptions(b,h),l=void 0,m=Rx.Observable.fromEvent(a,c);if("function"==typeof k){var n=this.domManager.evaluateExpression(k,f);if(n=d.unwrapProperty(n),d.isFunction(n))g.cleanup.add(m.subscribe(function(a){n.apply(f.$data,[f,a])}));else if(e.isCommand(n))i=n,g.cleanup.add(m.subscribe(function(a){i.execute(void 0)}));else{var o=n;g.cleanup.add(m.subscribe(o))}}else if("object"==typeof k){var p=k;i=this.domManager.evaluateExpression(p.command,f),i=d.unwrapProperty(i),k.hasOwnProperty("parameter")&&(l=this.domManager.evaluateExpression(p.parameter,f)),g.cleanup.add(m.subscribe(function(a){try{i.execute(l)}catch(b){j.app.defaultExceptionHandler.onNext(b)}}))}else d.throwError("invalid binding options")},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f},function(a,b,c){"use strict";function d(a,b){var c=b.getNodeState(a);return null!=c&&c[g.hasValueBindingValue]?c[g.valueBindingValue]:a.value}function e(a,b,c){(null===b||void 0===b)&&(b="");var d=c.getNodeState(a);"string"==typeof b?a.value!==b&&(a.value=b,null!=d&&d[g.hasValueBindingValue]&&(d[g.hasValueBindingValue]=!1,d[g.valueBindingValue]=void 0)):(null==d&&(d=this.createNodeState(),this.setNodeState(a,d)),d[g.valueBindingValue]=b,d[g.hasValueBindingValue]=!0)}var f=c(3),g=c(6),h=function(){function a(a,b){this.priority=5,this.domManager=a,this.app=b}return a.prototype.applyBinding=function(a,b,c,g,h){function i(){o&&(o.dispose(),o=null)}function j(a,b){p?e(l,b,a):((null===b||void 0===b)&&(b=""),l.value=b)}var k=this;1!==a.nodeType&&f.throwError("value-binding only operates on elements!"),null==b&&f.throwError("invalid binding-options!");var l=a,m=l.tagName.toLowerCase();"input"!==m&&"option"!==m&&"select"!==m&&"textarea"!==m&&f.throwError("value-binding only operates on checkboxes and radio-buttons");var n,o,p="input"===m&&"radio"===l.type||"option"===m,q=this.domManager.compileBindingOptions(b,h);g.cleanup.add(this.domManager.expressionToObservable(q,c).subscribe(function(a){try{f.isProperty(a)?(i(),o=new Rx.CompositeDisposable,n=a,o.add(n.changed.subscribe(function(a){j(k.domManager,a)})),j(k.domManager,n()),f.isReadOnlyProperty(n)||o.add(Rx.Observable.fromEvent(l,"change").subscribe(function(a){try{n(p?d(l,k.domManager):l.value)}catch(a){k.app.defaultExceptionHandler.onNext(a)}}))):j(k.domManager,a)}catch(b){k.app.defaultExceptionHandler.onNext(b)}})),g.cleanup.add(Rx.Disposable.create(function(){a=null,b=null,c=null,g=null,l=null,i()}))},a.prototype.configure=function(a){},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=h,b.getNodeValue=d,b.setNodeValue=e},function(a,b,c){"use strict";var d=c(3),e=c(36),f=function(){function a(a,b){this.priority=-1,this.domManager=a,this.app=b}return a.prototype.applyBinding=function(a,b,c,f,g){function h(){m&&(m.dispose(),m=null)}function i(a){var b=o.ownerDocument;if("activeElement"in b){var c=void 0;try{c=b.activeElement}catch(d){c=b.body}a=c===o}l(a)}function j(a){a?0===q&&"none"!==o.style.display?o.focus():Rx.Observable.timer(q).subscribe(function(){o.focus()}):o.blur()}var k=this;1!==a.nodeType&&d.throwError("hasFocus-binding only operates on elements!"),null==b&&d.throwError("invalid binding-options!");var l,m,n,o=a,p=this.domManager.compileBindingOptions(b,g),q=0;if("object"==typeof p&&p.hasOwnProperty("property")){var r=p;n=r.property,q=this.domManager.evaluateExpression(r.delay,c),"boolean"==typeof q&&(q=q?1:0)}else n=p;f.cleanup.add(this.domManager.expressionToObservable(n,c).subscribe(function(a){try{d.isProperty(a)?(h(),m=new Rx.CompositeDisposable,l=a,m.add(l.changed.subscribe(function(a){j(a)})),j(l()),d.isReadOnlyProperty(l)||m.add(Rx.Observable.merge(k.getFocusEventObservables(o)).subscribe(function(a){i(a)}))):(e.emitPropRefHint("HasFocus",b),j(a))}catch(c){k.app.defaultExceptionHandler.onNext(c)}})),f.cleanup.add(Rx.Disposable.create(function(){a=null,b=null,c=null,f=null,o=null,h()}))},a.prototype.configure=function(a){},a.prototype.getFocusEventObservables=function(a){var b=[];return b.push(Rx.Observable.fromEvent(a,"focus").select(function(a){return!0})),b.push(Rx.Observable.fromEvent(a,"focusin").select(function(a){return!0})),b.push(Rx.Observable.fromEvent(a,"blur").select(function(a){return!1})),b.push(Rx.Observable.fromEvent(a,"focusout").select(function(a){return!1})),b},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f},function(a,b,c){"use strict";function d(a,b){var c=a+"-Binding: You have passed a property instead of a propRef to a Two-Way binding. This is most likely not what you want because the binding won't be able to update your model when your view changes - Solution: Prefix your property with an @-symbol - Binding-Expression [\""+b+'"]';e.hint(c)}var e=c(7);b.emitPropRefHint=d},function(a,b,c){"use strict";var d=c(3),e=function(){function a(a,b){this.priority=50,this.controlsDescendants=!0,this.domManager=a,this.app=b}return a.prototype.applyBinding=function(a,b,c,e,f){var g=this;1!==a.nodeType&&d.throwError("with-binding only operates on elements!"),null==b&&d.throwError("invalid binding-options!");var h=a,i=this,j=this.domManager.compileBindingOptions(b,f),k=this.domManager.expressionToObservable(j,c);e.cleanup.add(k.subscribe(function(a){try{i.applyValue(h,d.unwrapProperty(a),e)}catch(b){g.app.defaultExceptionHandler.onNext(b)}})),e.cleanup.add(Rx.Disposable.create(function(){a=null,b=null,c=null,e=null,k=null,h=null,i=null}))},a.prototype.configure=function(a){},a.prototype.applyValue=function(a,b,c){c.model=b;var d=this.domManager.getDataContext(a);this.domManager.cleanDescendants(a),this.domManager.applyBindingsToDescendants(d,a)},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e},function(a,b,c){"use strict";var d=c(3),e=c(36),f=function(){function a(a,b){this.priority=0,this.domManager=a,this.app=b}return a.prototype.applyBinding=function(a,b,c,f,g){function h(){p&&(p.dispose(),p=null)}function i(a){k.checked=a}var j=this;1!==a.nodeType&&d.throwError("checked-binding only operates on elements!"),null==b&&d.throwError("invalid binding-options!");var k=a,l=k.tagName.toLowerCase(),m="checkbox"===k.type,n="radio"===k.type;("input"!==l||!m&&!n)&&d.throwError("checked-binding only operates on checkboxes and radio-buttons");var o,p,q=this.domManager.compileBindingOptions(b,g);f.cleanup.add(this.domManager.expressionToObservable(q,c).subscribe(function(a){try{if(d.isProperty(a)){if(h(),p=new Rx.CompositeDisposable,o=a,p.add(o.changed.subscribe(function(a){i(a)})),i(o()),!d.isReadOnlyProperty(o)){var c=j.getCheckedEventObservables(k);p.add(Rx.Observable.merge(c).subscribe(function(a){try{o(k.checked)}catch(a){j.app.defaultExceptionHandler.onNext(a)}}))}}else e.emitPropRefHint("Checked",b),i(a)}catch(f){j.app.defaultExceptionHandler.onNext(f)}})),f.cleanup.add(Rx.Disposable.create(function(){a=null,b=null,c=null,f=null,k=null,h()}))},a.prototype.configure=function(a){},a.prototype.getCheckedEventObservables=function(a){var b=[];return b.push(Rx.Observable.fromEvent(a,"click")),b.push(Rx.Observable.fromEvent(a,"change")),b},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f},function(a,b,c){"use strict";var d=c(3),e=c(25),f={8:"backspace",9:"tab",13:"enter",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete"},g=function(){function a(a,b){this.priority=0,this.domManager=a,this.app=b}return a.prototype.applyBinding=function(a,b,c,e,f){var g=this;1!==a.nodeType&&d.throwError("keyPress-binding only operates on elements!"),null==b&&d.throwError("invalid binding-options!");var h=a,i=this.domManager.getObjectLiteralTokens(b),j=Rx.Observable.fromEvent(h,"keydown").where(function(a){return!a.repeat}).publish().refCount();i.forEach(function(a){var b,d=a.key,h=[];d.split(" ").forEach(function(a){b={expression:d,keys:{}},a.split("-").forEach(function(a){b.keys[a.trim()]=!0}),h.push(b)}),g.wireKey(a.value,j,h,c,e,f)}),e.cleanup.add(Rx.Disposable.create(function(){a=null,b=null,c=null,e=null,h=null}))},a.prototype.configure=function(a){},a.prototype.testCombination=function(a,b){var c=!(!b.metaKey||b.ctrlKey),d=!!b.altKey,e=!!b.ctrlKey,g=!!b.shiftKey,h=b.keyCode,i=!!a.keys.meta,j=!!a.keys.alt,k=!!a.keys.ctrl,l=!!a.keys.shift;(!g||l)&&h>=65&&90>=h&&(h+=32);var m=a.keys[f[h]]||a.keys[h.toString()]||a.keys[String.fromCharCode(h)];return m&&i===c&&j===d&&k===e&&l===g},a.prototype.testCombinations=function(a,b){for(var c=0;c<a.length;c++)if(this.testCombination(a[c],b))return!0;return!1},a.prototype.wireKey=function(a,b,c,f,g,h){var i,j=this,k=this.domManager.compileBindingOptions(a,h),l=void 0;if("function"==typeof k){var m=this.domManager.evaluateExpression(k,f);m=d.unwrapProperty(m),e.isCommand(m)?(i=m,g.cleanup.add(b.where(function(a){return j.testCombinations(c,a)}).subscribe(function(a){try{i.execute(void 0),a.preventDefault()}catch(a){j.app.defaultExceptionHandler.onNext(a)}}))):g.cleanup.add(b.where(function(a){return j.testCombinations(c,a)}).subscribe(function(a){try{m.apply(f.$data,[f]),a.preventDefault()}catch(a){j.app.defaultExceptionHandler.onNext(a)}}))}else"object"==typeof k?(i=this.domManager.evaluateExpression(k.command,f),i=d.unwrapProperty(i),k.hasOwnProperty("parameter")&&(l=this.domManager.evaluateExpression(k.parameter,f)),g.cleanup.add(b.where(function(a){return j.testCombinations(c,a)}).subscribe(function(a){try{i.execute(l),a.preventDefault()}catch(a){j.app.defaultExceptionHandler.onNext(a)}}))):d.throwError("invalid binding options")},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=g},function(a,b,c){"use strict";var d=c(3),e=c(16),f=c(36),g=function(){function a(a,b){this.priority=0,this.domManager=a,this.app=b}return a.prototype.applyBinding=function(a,b,c,e,g){function h(a){(null===a||void 0===a)&&(a=""),k.value!==a&&(q=a,k.value=a)}function i(){o&&(o.dispose(),o=null),p&&(p.dispose(),p=null)}var j=this;1!==a.nodeType&&d.throwError("textInput-binding only operates on elements!"),null==b&&d.throwError("invalid binding-options!");var k=a,l=k.tagName.toLowerCase(),m="textarea"===l;"input"!==l&&"textarea"!==l&&d.throwError("textInput-binding can only be applied to input or textarea elements");var n,o,p,q,r=this.domManager.compileBindingOptions(b,g);e.cleanup.add(this.domManager.expressionToObservable(r,c).subscribe(function(a){try{if(d.isProperty(a)){if(i(),n=a,o=n.changed.subscribe(function(a){h(a)}),h(n()),!d.isReadOnlyProperty(n)){var c=j.getTextInputEventObservables(k,m);p=Rx.Observable.merge(c).subscribe(function(a){try{n(k.value)}catch(a){j.app.defaultExceptionHandler.onNext(a)}})}}else f.emitPropRefHint("TextInput",b),h(a)}catch(e){j.app.defaultExceptionHandler.onNext(e)}})),e.cleanup.add(Rx.Disposable.create(function(){a=null,b=null,c=null,e=null,k=null,i()}))},a.prototype.configure=function(a){},a.prototype.getTextInputEventObservables=function(a,b){var c=[];return e.ie&&e.ie.version<10?e.ie.version<=9&&(c.push(e.ie.getSelectionChangeObservable(a).where(function(b){return b.activeElement===a})),c.push(Rx.Observable.fromEvent(a,"dragend")),c.push(Rx.Observable.fromEvent(a,"input")),c.push(Rx.Observable.fromEvent(a,"propertychange").where(function(a){return"value"===a.propertyName}))):(c.push(Rx.Observable.fromEvent(a,"input")),e.safari&&e.safari.version<5&&b?(c.push(Rx.Observable.fromEvent(a,"keydown")),c.push(Rx.Observable.fromEvent(a,"paste")),c.push(Rx.Observable.fromEvent(a,"cut"))):e.opera&&e.opera.version<11?c.push(Rx.Observable.fromEvent(a,"keydown")):e.firefox&&e.firefox.version<4&&(c.push(Rx.Observable.fromEvent(a,"DOMAutoComplete")),c.push(Rx.Observable.fromEvent(a,"dragdrop")),c.push(Rx.Observable.fromEvent(a,"drop")))),c.push(Rx.Observable.fromEvent(a,"change")),c},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=g},function(a,b,c){"use strict";var d=c(3),e=c(34),f=c(17),g=c(36),h=new Array,i=function(){function a(a){this.domManager=a}return a.prototype.supports=function(a,b){return"input"===a.tagName.toLowerCase()&&"radio"===a.getAttribute("type")&&!f.isList(b)},a.prototype.observeElement=function(a){return Rx.Observable.merge(Rx.Observable.fromEvent(a,"click"),Rx.Observable.fromEvent(a,"change"))},a.prototype.observeModel=function(a){if(d.isProperty(a)){var b=a;return b.changed}return Rx.Observable.never()},a.prototype.updateElement=function(a,b){var c=a;c.checked=e.getNodeValue(c,this.domManager)==d.unwrapProperty(b)},a.prototype.updateModel=function(a,b,c){var d=a;d.checked&&b(e.getNodeValue(d,this.domManager))},a}(),j=function(){function a(a){this.domManager=a}return a.prototype.supports=function(a,b){return"select"===a.tagName.toLowerCase()&&!f.isList(b)},a.prototype.observeElement=function(a){return Rx.Observable.fromEvent(a,"change")},a.prototype.observeModel=function(a){if(d.isProperty(a)){var b=a;return b.changed}return Rx.Observable.never()},a.prototype.updateElement=function(a,b){var c=a,f=d.unwrapProperty(b),g=c.options.length;if(null==f)c.selectedIndex=-1;else for(var h=0;g>h;h++){var i=c.options[h];if(e.getNodeValue(i,this.domManager)==f){c.selectedIndex=h;break}}},a.prototype.updateModel=function(a,b,c){var d=a,f=-1!==d.selectedIndex?e.getNodeValue(d.options[d.selectedIndex],this.domManager):void 0;b(f)},a}(),k=function(){function a(a,b){this.priority=0,this.domManager=a,this.app=b,h.push(new i(a)),h.push(new j(a))}return a.prototype.applyBinding=function(a,b,c,e,f){function i(){l&&(l.dispose(),l=null)}var j=this;1!==a.nodeType&&d.throwError("selectedValue-binding only operates on elements!"),null==b&&d.throwError("invalid binding-options!");var k,l,m=a,n=this.domManager.compileBindingOptions(b,f);e.cleanup.add(this.domManager.expressionToObservable(n,c).subscribe(function(a){try{i(),k=void 0;for(var c=0;c<h.length;c++)if(h[c].supports(m,a)){k=h[c];break}k||d.throwError("selectedValue-binding does not support this combination of bound element and model!"),l=new Rx.CompositeDisposable,k.updateElement(m,a),l.add(k.observeModel(a).subscribe(function(b){try{k.updateElement(m,a)}catch(c){j.app.defaultExceptionHandler.onNext(c)}})),d.isProperty(a)?l.add(k.observeElement(m).subscribe(function(b){try{k.updateModel(m,a,b)}catch(b){j.app.defaultExceptionHandler.onNext(b)}})):g.emitPropRefHint("SelectedValue",b)}catch(e){j.app.defaultExceptionHandler.onNext(e)}})),e.cleanup.add(Rx.Disposable.create(function(){a=null,b=null,c=null,e=null,m=null,i()}))},a.prototype.configure=function(a){},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=k},function(a,b,c){"use strict";var d=c(3),e=function(){function a(a,b){this.priority=30,this.controlsDescendants=!0,this.domManager=a,this.app=b}return a.prototype.applyBinding=function(a,b,c,e,f){function g(){k&&(k.dispose(),k=null)}var h=this;1!==a.nodeType&&d.throwError("component-binding only operates on elements!"),null==b&&d.throwError("invalid binding-options!");var i,j,k,l=a,m=this.domManager.compileBindingOptions(b,f),n=m,o={};"function"==typeof m?(i=m,j=this.domManager.expressionToObservable(i,c)):(j=this.domManager.expressionToObservable(n.name,c),n.params&&(d.isFunction(n.params)?o=this.domManager.evaluateExpression(n.params,c):"object"==typeof n.params?Object.keys(n.params).forEach(function(a){o[a]=h.domManager.evaluateExpression(n.params[a],c)}):d.throwError("invalid component-params"))),e.cleanup.add(j.subscribe(function(a){try{g(),k=new Rx.CompositeDisposable;var b=f.loadComponent(a,o),i=void 0;null==b&&d.throwError("component '{0}' is not registered with current module-context",a),i=b.subscribe(function(a){null!=i&&(i.dispose(),i=void 0),a.viewModel&&d.isDisposable(a.viewModel)&&k.add(a.viewModel),h.applyTemplate(a,l,c,e,a.template,a.viewModel)}),null!=i&&k.add(i)}catch(j){h.app.defaultExceptionHandler.onNext(j)}})),e.cleanup.add(Rx.Disposable.create(function(){a=null,b=null,c=null,e=null,m=null,g()}))},a.prototype.configure=function(a){},a.prototype.applyTemplate=function(a,b,c,d,e,f){if(e){for(;b.firstChild;)this.domManager.cleanNode(b.firstChild),b.removeChild(b.firstChild);for(var g=0;g<e.length;g++){var h=e[g].cloneNode(!0);b.appendChild(h)}}f&&(d.model=f,c=this.domManager.getDataContext(b)),f&&a.preBindingInit&&f.hasOwnProperty(a.preBindingInit)&&f[a.preBindingInit].call(f,b),this.domManager.applyBindingsToDescendants(c,b),f&&a.postBindingInit&&f.hasOwnProperty(a.postBindingInit)&&f[a.postBindingInit].call(f,b)},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e},function(a,b,c){"use strict";var d=c(3),e=function(){function a(a,b,c){this.priority=5,this.domManager=a,this.router=b,this.app=c}return a.prototype.applyBinding=function(a,b,c,e,f){var g=this;1!==a.nodeType&&d.throwError("stateActive-binding only operates on elements!"),null==b&&d.throwError("invalid binding-options!");var h,i,j,k=a,l=this.domManager.compileBindingOptions(b,f),m=[],n=l,o=[],p="active";m.push(this.router.current.changed.startWith(this.router.current())),"function"==typeof l?(h=l,m.push(this.domManager.expressionToObservable(h,c))):(m.push(this.domManager.expressionToObservable(n.name,c)),n.params&&Object.keys(n.params).forEach(function(a){o.push(a),m.push(g.domManager.expressionToObservable(n.params[a],c))}),n.cssClass&&(p=this.domManager.evaluateExpression(n.cssClass,c))),e.cleanup.add(Rx.Observable.combineLatest(m,function(a){return d.args2Array(arguments)}).subscribe(function(a){try{a.shift();i=d.unwrapProperty(a.shift()),j={};for(var b=0;b<o.length;b++)j[o[b]]=d.unwrapProperty(a[b]);var c=g.router.includes(i,j),e=p.split(/\s+/).map(function(a){return a.trim()}).filter(function(a){return a});e.length&&d.toggleCssClass.apply(null,[k,c].concat(e))}catch(f){g.app.defaultExceptionHandler.onNext(f)}})),e.cleanup.add(Rx.Disposable.create(function(){a=null,b=null,c=null,e=null,m=null,l=null,i=null,j=null,n=null,o=null}))},a.prototype.configure=function(a){},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e},function(a,b,c){"use strict";var d=c(3),e=function(){function a(a,b,c){this.priority=1e3,this.controlsDescendants=!0,this.domManager=a,this.router=b,this.app=c}return a.prototype.applyBinding=function(a,b,c,e,f){function g(){j&&(j.dispose(),j=null)}var h=this;1!==a.nodeType&&d.throwError("view-binding only operates on elements!"),null==b&&d.throwError("invalid binding-options!");var i,j,k=a,l=this.domManager.compileBindingOptions(b,f),m=this.domManager.evaluateExpression(l,c);(null==m||"string"!=typeof m)&&d.throwError("views must be named!"),e.cleanup.add(this.router.current.changed.startWith(this.router.current()).subscribe(function(a){try{g(),j=new Rx.CompositeDisposable;var b=h.router.getViewComponent(m);null!=b?d.isEqual(i,b)||(j.add(h.applyTemplate(m,b.component,i?i.component:void 0,b.params,b.animations,k,c,f)),i=b):(j.add(h.applyTemplate(m,null,i?i.component:void 0,null,i?i.animations:{},k,c,f)),i={})}catch(e){h.app.defaultExceptionHandler.onNext(e)}})),e.cleanup.add(Rx.Disposable.create(function(){a=null,b=null,c=null,e=null}))},a.prototype.configure=function(a){},a.prototype.applyTemplate=function(a,b,c,e,f,g,h,i){function j(){o.forEach(function(a){n.domManager.cleanNode(a),g.removeChild(a)})}function k(a){h.$componentParams=e;var c=document.createElement("div"),f=d.formatString("component: { name: '{0}', params: $componentParams }",b);c.setAttribute("data-bind",f),null!=a&&a.prepare(c),g.appendChild(c),n.domManager.applyBindings(h,c)}var l,m=this,n=this,o=d.nodeChildrenToArray(g),p=[];if(o.length>0){var q;f&&f.leave&&(q="string"==typeof f.leave?i.animation(f.leave):f.leave),q?(q.prepare(o),l=q.run(o).continueWith(function(){return q.complete(o)}).continueWith(j)):l=Rx.Observable.startDeferred(j),p.push(l)}if(null!=b){var r;f&&f.enter&&(r="string"==typeof f.enter?i.animation(f.enter):f.enter),l=Rx.Observable.startDeferred(function(){return k(r)}),r&&(l=l.continueWith(r.run(g.childNodes)).continueWith(function(){return r.complete(g.childNodes)})),l=l.continueWith(function(){var d={view:a,fromComponent:c,toComponent:b},e=m.router;e.viewTransitionsSubject.onNext(d)}),p.push(l)}return l=p.length>1?Rx.Observable.combineLatest(p,d.noop).take(1):1===p.length?p[0].take(1):null,l?l.subscribe()||Rx.Disposable.empty:Rx.Disposable.empty},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e},function(a,b,c){"use strict";var d=c(3),e=function(){function a(a,b,c){this.priority=5,this.domManager=a,this.router=b,this.app=c}return a.prototype.applyBinding=function(a,b,c,e,f){var g=this;1!==a.nodeType&&d.throwError("stateRef-binding only operates on elements!"),null==b&&d.throwError("invalid binding-options!");var h,i,j,k=a,l="a"===k.tagName.toLowerCase(),m=l?k:void 0,n=this.domManager.compileBindingOptions(b,f),o=[],p=n,q=[];"function"==typeof n?(h=n,o.push(this.domManager.expressionToObservable(h,c))):(o.push(this.domManager.expressionToObservable(p.name,c)),
p.params&&Object.keys(p.params).forEach(function(a){q.push(a),o.push(g.domManager.expressionToObservable(p.params[a],c))})),e.cleanup.add(Rx.Observable.combineLatest(o,function(a){return d.args2Array(arguments)}).subscribe(function(a){try{i=d.unwrapProperty(a.shift()),j={};for(var b=0;b<q.length;b++)j[q[b]]=d.unwrapProperty(a[b]);null!=m&&(m.href=g.router.url(i,j))}catch(c){g.app.defaultExceptionHandler.onNext(c)}})),e.cleanup.add(Rx.Observable.fromEvent(k,"click").subscribe(function(a){a.preventDefault(),g.router.go(i,j,{location:!0})})),e.cleanup.add(Rx.Disposable.create(function(){a=null,b=null,c=null,e=null,o=null,n=null,i=null,j=null,p=null,q=null}))},a.prototype.configure=function(a){},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e},function(a,b,c){"use strict";var d=c(3),e=function(){function a(a,b){this.priority=0,this.domManager=a,this.app=b}return a.prototype.applyBinding=function(a,b,c,e,f){var g=this;1!==a.nodeType&&d.throwError("binding only operates on elements!"),null==b&&d.throwError("invalid binding-options!");var h,i=a,j=this.domManager.compileBindingOptions(b,f),k=new Array,l={},m=!0,n=Object.keys(j);if("function"==typeof j){var o=this.domManager.expressionToObservable(j,c);k.push(o)}else for(var p=0;p<n.length;p++)k.push(this.domManager.expressionToObservable(j[n[p]],c));e.cleanup.add(Rx.Observable.combineLatest(k,function(){return d.args2Array(arguments)}).subscribe(function(a){try{h=new Rx.CompositeDisposable;var b=void 0;if("function"==typeof j)b=a[0];else{b={};for(var k=0;k<n.length;k++){var o=n[k];b[o]=a[k]}}m&&d.isFunction(g.inner.init)&&(g.inner.init(i,b,c,g.domManager,l,e.cleanup,f),m=!1),g.inner.update(i,b,c,g.domManager,l,e.cleanup,f)}catch(p){g.app.defaultExceptionHandler.onNext(p)}})),e.cleanup.add(Rx.Disposable.create(function(){d.isFunction(g.inner.cleanup)&&g.inner.cleanup(i,g.domManager,l,e.cleanup,f),a=null,b=null,c=null,e=null,l=null,j=null}))},a.prototype.configure=function(a){},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e},function(a,b,c){"use strict";var d=c(3),e={},f=function(){function a(a){var b=this;this.template=function(a){return b.buildTemplate(a)},this.viewModel=function(a){var b=a;return{items:a.items,selectedValue:a.selectedValue,hooks:{afterRender:b.afterRender}}},this.htmlTemplateEngine=a}return a.prototype.buildTemplate=function(a){var b,c,f=void 0;if(!a.noCache&&(f=(null!=a.name?a.name:"")+"-"+(null!=a.itemText?a.itemText:"")+"-"+(null!=a.itemValue?a.itemValue:"")+"-"+(null!=a.itemClass?a.itemClass:"")+"-"+(null!=a.cssClass?a.cssClass:"")+"-"+(null!=a.selectedValue?"true":"false")+"-"+(a.multiple?"true":"false")+"-"+(a.required?"true":"false")+"-"+(a.autofocus?"true":"false")+"-"+(a.size?a.size.toString():"0"),c=e[f],null!=c))return c;b='<select class="wx-select{2}" data-bind="{0}"><option data-bind="{1}"></option></select>';var g=[],h=[],i=[],j=[];g.push({key:"foreach",value:"{ data: items, hooks: hooks }"}),void 0!==a.cssClass?a.cssClass=" "+a.cssClass:a.cssClass="",a.selectedValue&&g.push({key:"selectedValue",value:"@selectedValue"}),a.name&&h.push({key:"name",value:a.name}),a.multiple&&h.push({key:"multiple",value:"true"}),void 0!==a.size&&h.push({key:"size",value:a.size.toString()}),a.required&&h.push({key:"required",value:"true"}),a.autofocus&&h.push({key:"autofocus",value:"true"}),h.length&&g.push({key:"attr",value:"{ "+h.map(function(a){return a.key+": "+a.value}).join(", ")+" }"}),i.push({key:"value",value:a.itemValue||"$data"}),i.push({key:"text",value:a.itemText||"$data"}),a.itemClass&&j.push({key:"class",value:"'"+a.itemClass+"'"}),j.length&&i.push({key:"attr",value:"{ "+j.map(function(a){return a.key+": "+a.value}).join(", ")+" }"});var k=g.map(function(a){return a.key+": "+a.value}).join(", "),l=i.map(function(a){return a.key+": "+a.value}).join(", ");return b=d.formatString(b,k,l,a.cssClass),a.noCache||(e[f]=b),c=this.htmlTemplateEngine.parse(b)},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f},function(a,b,c){"use strict";var d=c(3),e=0,f={},g=function(){function a(a){var b=this;this.template=function(a){return b.buildTemplate(a)},this.viewModel=function(a){var b=a,c=null!=b.groupName?b.groupName:d.formatString("wx-radiogroup-{0}",e++);return{items:a.items,selectedValue:a.selectedValue,groupName:c,hooks:{afterRender:a.afterRender}}},this.htmlTemplateEngine=a}return a.prototype.buildTemplate=function(a){var b,c,e=void 0;if(!a.noCache&&(e=(null!=a.itemText?a.itemText:"")+"-"+(null!=a.itemValue?a.itemValue:"")+"-"+(null!=a.itemClass?a.itemClass:"")+"-"+(null!=a.selectedValue?"true":"false"),c=f[e],null!=c))return c;b='<div class="wx-radiogroup" data-bind="{0}"><input type="radio" data-bind="{1}"/>{2}</div>';var g=[],h=[],i=[],j=[],k="";g.push({key:"foreach",value:"{ data: items, hooks: hooks }"}),h.length&&g.push({key:"attr",value:"{ "+h.map(function(a){return a.key+": "+a.value}).join(", ")+" }"}),i.push({key:"value",value:a.itemValue||"$data"}),j.push({key:"name",value:"$parent.groupName"}),a.selectedValue&&i.push({key:"selectedValue",value:"$parent.@selectedValue"}),a.itemText&&(k+=d.formatString('<label data-bind="text: {0}, attr: { for: {1} }"></label>',a.itemText,"$parent.groupName + '-' + $index"),j.push({key:"id",value:"$parent.groupName + '-' + $index"})),a.itemClass&&j.push({key:"class",value:"'"+a.itemClass+"'"}),j.length&&i.push({key:"attr",value:"{ "+j.map(function(a){return a.key+": "+a.value}).join(", ")+" }"});var l=g.map(function(a){return a.key+": "+a.value}).join(", "),m=i.map(function(a){return a.key+": "+a.value}).join(", ");return b=d.formatString(b,l,m,k),a.noCache||(f[e]=b),c=this.htmlTemplateEngine.parse(b)},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=g},function(a,b,c){"use strict";var d=c(3),e=c(8),f=c(50),g=function(){function a(a,b){var c=this;this.current=e.property(),this.states={},this.pathSeparator=".",this.parentPathDirective="^",this.rootStateName="$",this.validPathRegExp=/^[a-zA-Z]([\w-_]*$)/,this.viewTransitionsSubject=new Rx.Subject,this.domManager=a,this.app=b,this.viewTransitions=this.viewTransitionsSubject.asObservable(),this.reset(!1),b.history.onPopState.subscribe(function(a){try{if(a&&a.state){var d=a.state,e=d.stateName;null!=e&&(c.go(e,d.params,{location:!1}),b.title(d.title))}}catch(a){b.defaultExceptionHandler.onNext(a)}}),document&&b.title.changed.subscribe(function(a){document.title=a,null!=c.current()&&c.replaceHistoryState(c.current(),a)})}return a.prototype.state=function(a){return this.registerStateInternal(a),this},a.prototype.updateCurrentStateParams=function(a){var b=this.current();a(b.params),this.replaceHistoryState(b,this.app.title())},a.prototype.go=function(a,b,c){a=this.mapPath(a),null==this.states[a]&&d.throwError("state '{0}' is not registered",a),this.activateState(a,b,c)},a.prototype.get=function(a){return this.states[a]},a.prototype.is=function(a,b,c){var d=this.current(),e=d.name===a;if(b=b||{},e){var f=Object.keys(d.params),g=Object.keys(b);if(f.length===g.length){for(var h=0;h<g.length;h++)if(d.params[g[h]]!=b[g[h]]){e=!1;break}}else e=!1}return e},a.prototype.includes=function(a,b,c){var d=this.current(),e=0===d.name.indexOf(a);if(b=b||{},e){var f=Object.keys(d.params),g=Object.keys(b);g=g.length<=f.length?g:f;for(var h=0;h<g.length;h++)if(d.params[g[h]]!=b[g[h]]){e=!1;break}}return e},a.prototype.url=function(a,b){a=this.mapPath(a);var c=this.getAbsoluteRouteForState(a);return null!=c?c.stringify(b):null},a.prototype.reset=function(a){void 0===a&&(a=!0),this.states={},this.root=this.registerStateInternal({name:this.rootStateName,url:f.route("/")}),a&&this.go(this.rootStateName,{},{location:2})},a.prototype.sync=function(a){null==a&&(a=this.app.history.location.pathname);for(var b,c=Object.keys(this.states),d=c.length,e=0;d>e;e++){var f=this.states[c[e]],g=this.getAbsoluteRouteForState(f.name);if(null!=(b=g.parse(a)))return void this.go(f.name,b,{location:2})}null==this.current()&&this.reload()},a.prototype.reload=function(){var a,b;null!=this.current()?(a=this.current().name,b=this.current().params):(a=this.rootStateName,b={}),this.go(a,b,{force:!0,location:2})},a.prototype.getViewComponent=function(a){var b=this.current(),c=void 0;if(null!=b.views){var e=b.views[a],f={};if(null!=e){c={},"object"==typeof e?(c.component=e.component,c.params=e.params||{},c.animations=e.animations):(c.component=e,c.params={},c.animations=void 0);var g=this.getViewParameterNamesFromStateConfig(a,c.component);g.forEach(function(a){b.params.hasOwnProperty(a)&&(f[a]=b.params[a])}),c.params=d.extend(f,c.params)}}return c},a.prototype.registerStateInternal=function(a){var b=this,c=a.name.split(this.pathSeparator);return a.name!==this.rootStateName&&c.forEach(function(a){b.validPathRegExp.test(a)||d.throwError("invalid state-path '{0}' (a state-path must start with a character, optionally followed by one or more alphanumeric characters, dashes or underscores)")}),a=d.extend(a,{}),this.states[a.name]=a,null!=a.url?"string"==typeof a.url&&(a.url=f.route(a.url)):a.name!==this.rootStateName?a.url=f.route(c[c.length-1]):a.url=f.route("/"),a.name===this.rootStateName&&(this.root=a),a},a.prototype.pushHistoryState=function(a,b){var c={stateName:a.name,params:a.params,title:null!=b?b:null!=document?document.title:""};this.app.history.pushState(c,"",a.url)},a.prototype.replaceHistoryState=function(a,b){var c={stateName:a.name,params:a.params,title:null!=b?b:null!=document?document.title:""};this.app.history.replaceState(c,"",a.url)},a.prototype.mapPath=function(a){if(0===a.indexOf(this.pathSeparator))return this.current().name+a;if(0===a.indexOf(this.parentPathDirective)){var b=this.current().name;if(b===this.rootStateName)return b;for(var c=b.split(this.pathSeparator),d=c.length-1;d>0;d--){var e=c.slice(0,d).join(this.pathSeparator);if(this.get(e)||this.get(e+a.substr(1)))return a=e+a.substr(1)}return a=this.rootStateName+a.substr(1)}return a},a.prototype.getStateHierarchy=function(a){var b,c=a.split(this.pathSeparator),d="",e=[];a!==this.rootStateName&&e.push(this.root);for(var g=0;g<c.length;g++)g>0?d+=this.pathSeparator+c[g]:d=c[g],b=this.states[d],null==b&&(b={name:d,url:f.route(d)}),e.push(b);return e},a.prototype.getAbsoluteRouteForState=function(a,b){b=null!=b?b:this.getStateHierarchy(a);var c=null;return b.forEach(function(a){if(null!=c){var b=a.url;c=b.isAbsolute?b:c.concat(a.url)}else c=a.url}),c},a.prototype.activateState=function(a,b,c){var e=this.getStateHierarchy(a),f={},g={};e.forEach(function(a){null!=a.views&&d.extend(a.views,f),null!=a.params&&d.extend(a.params,g)}),b&&d.extend(b,g);var h=this.getAbsoluteRouteForState(a,e),i=d.extend(this.states[a],{});i.url=h.stringify(b),i.views=f,i.params=g;var j=this.current();(c&&c.force||null==j||j.name!==a||!d.isEqual(j.params,i.params))&&(null!=j&&null!=j.views&&null!=i.views&&Object.keys(j.views).forEach(function(a){i.views.hasOwnProperty(a)||(i.views[a]=null)}),c&&c.location&&(2===c.location?this.replaceHistoryState(i,this.app.title()):this.pushHistoryState(i,this.app.title())),null!=j&&j.onLeave&&j.onLeave(this.get(j.name),j.params),this.current(i),i.onEnter&&i.onEnter(this.get(i.name),b))},a.prototype.getViewParameterNamesFromStateConfig=function(a,b){for(var c,e=this.getStateHierarchy(this.current().name),f={},g=[],h=-1,i=e.length;i--;i>=0)if(c=e[i],c.views&&c.views[a]){var j=c.views[a];"object"==typeof j&&(j=j.component),j===b&&(h=i)}return-1!==h&&(c=e[h],e=e.slice(0,h+1),e.forEach(function(a){null!=a.params&&d.extend(a.params,f)}),g=Object.keys(f),g=g.concat(c.url.params)),g},a}();b.Router=g},function(a,b,c){"use strict";function d(a,b){return new h(a,b)}var e=c(3),f=/[\-\[\]{}()+?.,\\\^$|#\s]/g,g=/([:*])(\w+)/g,h=function(){function a(a,b){var c=this;this.route=a,this.rules=b,this.params=[];var d=a;"string"==typeof a?(d=d.replace(f,"\\$&"),d=d.replace(g,function(a,b,d){return c.params.push(d),":"===b?"([^/]*)":"(.*)"}),d=new RegExp("^"+d+"$"),this.parse=function(a){var e,f,g=0,h={},i=a.match(d);if(!i)return null;for(;g<c.params.length;){if(e=c.params[g++],f=i[g],b&&e in b&&!c.validateRule(b[e],f))return null;h[e]=f}return h},this.stringify=function(b){b=b||{};var c,d,e=a;for(c in b)d=new RegExp("[:*]"+c+"\\b"),e=e.replace(d,b[c]);return e.replace(g,"")}):(this.parse=function(a){var b=a.match(d);return b&&{captures:b.slice(1)}},this.stringify=function(){return""})}return a.prototype.stripTrailingSlash=function(a){return 0===a.length||"/"===a||a.lastIndexOf("/")!==a.length-1?a:a.substr(0,a.length-1)},Object.defineProperty(a.prototype,"isAbsolute",{get:function(){return 0===this.route.indexOf("/")},enumerable:!0,configurable:!0}),a.prototype.concat=function(b){var c=b,d=this.stripTrailingSlash(this.route),f=this.stripTrailingSlash(c.route),g=null;return c.rules?this.rules?(Object.keys(this.rules).forEach(function(a){c.rules.hasOwnProperty(a)&&e.throwError("route '{0}' and '{1}' have conflicting rule '{2}",d,f,a)}),g=e.extend(this.rules,e.extend(c.rules,{}))):g=e.extend(c.rules,{}):this.rules&&(g=e.extend(this.rules,{})),"/"===d&&(d=""),new a(d+"/"+f,g)},a.prototype.validateRule=function(a,b){var c=this.toString.call(a).charAt(8);return"R"===c?a.test(b):"F"===c?a(b):a==b},a}();b.RouteMatcher=h,b.route=d},function(a,b,c){"use strict";var d=c(20),e=function(){function a(){this.messageBus={},this.schedulerMappings={}}return a.prototype.listen=function(a){return this.setupSubjectIfNecessary(a).skip(1)},a.prototype.isRegistered=function(a){return this.messageBus.hasOwnProperty(a)},a.prototype.registerMessageSource=function(a,b){return a.subscribe(this.setupSubjectIfNecessary(b))},a.prototype.sendMessage=function(a,b){this.setupSubjectIfNecessary(b).onNext(a)},a.prototype.registerScheduler=function(a,b){this.schedulerMappings[b]=a},a.prototype.setupSubjectIfNecessary=function(a){var b=this.messageBus[a];return null==b&&(b=d.createScheduledSubject(this.getScheduler(a),null,new Rx.BehaviorSubject(void 0)),this.messageBus[a]=b),b},a.prototype.getScheduler=function(a){var b=this.schedulerMappings[a];return b||Rx.Scheduler.currentThread},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e},function(a,b){"use strict";function c(){return d.defaults}var d=function(){function a(){this.config={}}return a.prototype.res=function(a){return{status:a.status,response:a.response,xhr:a}},a.prototype.assign=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];for(var d in b)if({}.hasOwnProperty.call(b,d)){var e=b[d];if("object"==typeof e)for(var f in e)({}).hasOwnProperty.call(e,f)&&(a[f]=e[f])}return a},a.prototype.promise=function(b,c){return(b&&b.promise?b.promise:this.config.promise||a.defaults.promise)(c)},a.prototype.configure=function(a){this.config=this.assign({},this.config,a)},a.prototype.request=function(b){var c=this;return this.promise(b,function(d,e){var f=c.assign({},a.defaults,c.config,b),g=f.xmlHttpRequest();("string"!=typeof f.url||0===f.url.length)&&e(new Error("HttpClient: Please provide a request url")),a.Methods.hasOwnProperty(f.method.toUpperCase())||e(new Error("HttpClient: Unrecognized http-method: "+f.method));var h=f.url;f.params&&(h+=-1!==h.indexOf("?")?"&"!=h[h.length-1]?"&":"":"?",h+=Object.getOwnPropertyNames(f.params).map(function(a){return a+"="+f.params[a]}).join("&")),g.open(f.method.toUpperCase(),h,!0),g.addEventListener(a.Events.LOAD,function(){if(g.status>=200&&g.status<300){var a=null;g.responseText&&(a=f.raw===!0?g.responseText:f.load(g.responseText)),d(a)}else e(c.res(g))}),g.addEventListener(a.Events.ABORT,function(){return e(c.res(g))}),g.addEventListener(a.Events.ERROR,function(){return e(c.res(g))}),g.addEventListener(a.Events.TIMEOUT,function(){return e(c.res(g))});for(var i in f.headers)({}).hasOwnProperty.call(f.headers,i)&&g.setRequestHeader(i,f.headers[i]);for(var i in f.events)({}).hasOwnProperty.call(f.events,i)&&g.addEventListener(i,f.events[i].bind(null,g),!1);var j="object"!=typeof f.data||f.raw?f.data:f.dump(f.data);void 0!==j?g.send(j):g.send()})},a.prototype.get=function(b,c,d){var e={url:b,method:a.Methods.GET,params:c};return this.request(this.assign(e,d))},a.prototype.put=function(b,c,d){var e={url:b,method:a.Methods.PUT,data:c};return this.request(this.assign(e,d))},a.prototype.post=function(b,c,d){var e={url:b,method:a.Methods.POST,data:c};return this.request(this.assign(e,d))},a.prototype.patch=function(b,c,d){var e={url:b,method:a.Methods.PATCH,data:c};return this.request(this.assign(e,d))},a.prototype["delete"]=function(b,c){var d={url:b,method:a.Methods.DELETE};return this.request(this.assign(d,c))},a.prototype.options=function(b,c){var d={url:b,method:a.Methods.OPTIONS};return this.request(this.assign(d,c))},a.Methods={GET:"get",POST:"post",PUT:"put",DELETE:"delete",PATCH:"patch",OPTIONS:"options"},a.Events={READY_STATE_CHANGE:"readystatechange",LOAD_START:"loadstart",PROGRESS:"progress",ABORT:"abort",ERROR:"error",LOAD:"load",TIMEOUT:"timeout",LOAD_END:"loadend"},a.defaults={method:a.Methods.GET,data:void 0,headers:{Accept:"application/json","Content-Type":"application/json"},dump:JSON.stringify,load:JSON.parse,xmlHttpRequest:function(){return new XMLHttpRequest},promise:function(a){return new Promise(a)}},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d,b.getHttpClientDefaultConfig=c},function(a,b){"use strict";b.version="1.5.0"},function(a,b,c){"use strict";function d(a,b){b=b||Rx.Scheduler.currentThread;var c=function(a){return arguments.length>0&&g.throwError("attempt to write to a read-only observable property"),c.value};c.queryInterface=function(a){return a===h["default"].IObservableReadOnlyProperty||h["default"].IObservableProperty||a===h["default"].IDisposable},c.dispose=function(){c.sub&&(c.sub.dispose(),c.sub=null)},c.value=a,c.changedSubject=new Rx.Subject,c.changed=c.changedSubject.asObservable(),c.changingSubject=new Rx.Subject,c.changing=c.changingSubject.asObservable(),c.source=this,c.thrownExceptions=i.createScheduledSubject(b,j.injector.get(k.app).defaultExceptionHandler),c.catchExceptions=function(a){return c.thrownExceptions.subscribe(function(b){a(b)}),c};var d=!1;return c.sub=this.distinctUntilChanged().subscribe(function(a){d&&a===c.value||(d=!0,c.changingSubject.onNext(a),c.value=a,c.changedSubject.onNext(a))},function(a){return c.thrownExceptions.onNext(a)}),c}function e(a){return this.select(function(b){return{parameter:b,command:a instanceof Function?a():a}}).debounce(function(a){return a.command.canExecuteObservable.startWith(a.command.canExecute(a.parameter)).where(function(a){return a}).select(function(a){return 0})}).select(function(a){return a.command.executeAsync(a.parameter)["catch"](Rx.Observable.empty())})["switch"]().subscribe()}function f(){}var g=c(3),h=c(5),i=c(20),j=c(2),k=c(6),l=Rx.Observable;l.prototype.toProperty=d,l.prototype.continueWith=function(){var a=g.args2Array(arguments),b=a.shift(),c=void 0;if(g.isRxObservable(b))c=b;else if(g.isFunction(b)){var d=b;c=Rx.Observable.startDeferred(d)}return this.selectMany(function(a){return c})},l.prototype.invokeCommand=e,l.startDeferred=function(a){return Rx.Observable.defer(function(){return Rx.Observable.create(function(b){var c=!1;return c||a(),b.onNext(void 0),b.onCompleted(),Rx.Disposable.create(function(){return c=!0})})})},b.install=f},function(a,b,c){"use strict";function d(a){var b;a instanceof Node||a instanceof HTMLElement?b=[a]:Array.isArray(a)?b=a:a instanceof NodeList?b=l.nodeListToArray(a):l.throwError("invalid argument: element");var c=b.filter(function(a){return 1===a.nodeType});return c}function e(a){"s"===a.charAt(a.length-1)&&(a=a.substring(0,a.length-1));var b=parseFloat(a)||0;return b}function f(a){var b=getComputedStyle(a).transitionDuration,c=0,d=b.split(/\s*,\s*/);return d.forEach(function(a){var b=e(a);c=c?Math.max(b,c):b}),1e3*c}function g(a){var b=getComputedStyle(a).transitionDelay,c=0,d=b.split(/\s*,\s*/);return d.forEach(function(a){var b=Math.max(0,e(a));c=c?Math.max(b,c):b}),1e3*c}function h(a){var b=getComputedStyle(a).animationDuration||getComputedStyle(a).webkitAnimationDuration||"0s",c=getComputedStyle(a).animationDelay||getComputedStyle(a).webkitAnimationDelay||"0s",d=e(b),f=e(c);return 1e3*(d+f)}function i(a,b,c){var e={};return b?e.prepare=function(a,c){var e=d(a);e.forEach(function(a){return b(a,c)})}:e.prepare=l.noop,e.run=function(b,c){return Rx.Observable.defer(function(){var e=d(b);return 0===e.length?Rx.Observable["return"](void 0):Rx.Observable.combineLatest(e.map(function(b){return a(b,c)}),l.noop)})},c?e.complete=function(a,b){var e=d(a);e.forEach(function(a){return c(a,b)})}:e.complete=l.noop,e}function j(a,b,c){var e,i,j,k,m,n,o={};if(a){var p=void 0;"string"==typeof a&&(a=a.split(/\s+/).map(function(a){return a.trim()}).filter(function(a){return a})),p="string"==typeof a[0]?a.map(function(a){return{css:a,add:!0}}):a,e=p.filter(function(a){return a.add}).map(function(a){return a.css}),i=p.filter(function(a){return!a.add||a.remove}).map(function(a){return a.css}),o.prepare=function(a,b){var c=d(a);e&&e.length&&c.forEach(function(a){return l.toggleCssClass.apply(null,[a,!0].concat(e))}),i&&i.length&&c.forEach(function(a){return l.toggleCssClass.apply(null,[a,!1].concat(i))})}}var q;"string"==typeof b&&(b=b.split(/\s+/).map(function(a){return a.trim()}).filter(function(a){return a})),q="string"==typeof b[0]?b.map(function(a){return{css:a,add:!0}}):b,j=q.filter(function(a){return a.add}).map(function(a){return a.css}),k=q.filter(function(a){return!a.add||a.remove}).map(function(a){return a.css}),o.run=function(a,b){return Rx.Observable.defer(function(){var b=d(a);if(0===b.length)return Rx.Observable["return"](void 0);var c=Rx.Observable.combineLatest(b.map(function(a){var b=Math.max(f(a)+g(a),h(a));return Rx.Observable.timer(b)}),l.noop);return Rx.Observable.timer(1).subscribe(function(){j&&j.length&&b.forEach(function(a){return l.toggleCssClass.apply(null,[a,!0].concat(j))}),k&&k.length&&b.forEach(function(a){return l.toggleCssClass.apply(null,[a,!1].concat(k))})}),c})};var r;return c?("string"==typeof c&&(c=c.split(/\s+/).map(function(a){return a.trim()}).filter(function(a){return a})),r="string"==typeof c[0]?c.map(function(a){return{css:a,add:!0}}):c,m=r.filter(function(a){return a.add}).map(function(a){return a.css}),n=r.filter(function(a){return!a.add||a.remove}).map(function(a){return a.css})):(n=[],e&&e.length&&(n=n.concat(e)),j&&j.length&&(n=n.concat(j))),o.complete=function(a,b){var c=d(a);m&&m.length&&c.forEach(function(a){return l.toggleCssClass.apply(null,[a,!0].concat(m))}),n&&n.length&&c.forEach(function(a){return l.toggleCssClass.apply(null,[a,!1].concat(n))})},o}function k(){var a=l.args2Array(arguments),b=a.shift();return"function"==typeof b?i(b,a.shift(),a.shift()):j(b,a.shift(),a.shift())}var l=c(3);b.animation=k}])});
//# sourceMappingURL=web.rx.min.js.map